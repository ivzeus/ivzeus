(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{116:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>k});var r=o(5155),n=o(2115),s=o(5265),i=o(2021),l=o(9496),a=o(9488),c=o(6929),u=o(6370),d=o(703),h=o(8638),x=o(1574),p=o(6088),f=o(539),A=o(4627),m=o(4839),g=o(2081),y=o(4193),v=o(5694),j=o(63),b=o(556),C=o(2830),w=o(5619),z=o(6618),E=o(5704);let S=e=>{let{open:t,errorMessage:o,onClose:x,onConfirm:p,isLoading:f}=e,[A,m]=n.useState(""),g=()=>{p(A)};return(0,r.jsxs)(s.A,{open:t,onClose:x,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(i.A,{children:"Enter Quiz Password"}),(0,r.jsxs)(l.A,{dividers:!0,children:[(0,r.jsx)(a.A,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"This quiz is encrypted. Please enter the correct password to unlock and begin."}),(0,r.jsx)(c.A,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,variant:"outlined",value:A,error:""!==o,helperText:o,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),g())}})]}),(0,r.jsxs)(u.A,{children:[(0,r.jsx)(d.A,{onClick:x,color:"primary",children:"Cancel"}),(0,r.jsx)(d.A,{onClick:g,variant:"contained",disabled:!A||f,sx:{backgroundColor:"#6C6EEF","&:hover":{backgroundColor:"#5A5AD0"}},children:f?(0,r.jsx)(h.A,{size:24,color:"inherit"}):"Confirm"})]})]})},k=()=>{let{user:e,isAuthenticated:t,logout:o}=(0,b.A)(),s=(0,j.useRouter)(),[i,l]=n.useState(null),[c,u]=n.useState(!1),[k,I]=n.useState(null),[q,P]=n.useState(""),[D,F]=n.useState(""),[N,_]=n.useState(null);if(n.useEffect(()=>{console.log(">>> isAuthenticated",t),!1===t&&s.replace("/login")},[t,s]),n.useEffect(()=>{!async function(){let e="production"===E.env.Node_ENV?"/ivzeus/quiz/data/quizzes.json":"/data/quizzes.json";console.log("attempting to fetch quizzes",e);let t=await fetch(e);l(await t.json())}()},[]),n.useEffect(()=>{N&&(async()=>{try{if(!k||!k.encryption)return;let{encryption:e}=k,t=(0,z.Ms)(e.salt),o=await (0,z.Hz)(q,t,["decrypt"]);if(await (0,z.af)(e.challenge,e.iv,o)!==k.quizId){F("Data is corrupted"),_(null);return}let r=["id=".concat(N.id),"salt=".concat(encodeURIComponent(e.salt)),"iv=".concat(encodeURIComponent(e.iv)),"password=".concat(encodeURIComponent(q))].join("&");s.push("/quiz?".concat(r))}catch(e){console.log("[Error]:",e),_(null),F("Incorrect password input, or your browser doesn't support crypto.subtle.decrypt");return}})()},[N]),null===t||!1===t||!i)return(0,r.jsx)(x.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(h.A,{})});let K=async e=>{k&&(P(e),_({id:k.quizId,key:e}),console.log(e))},M=null!==N;return(0,r.jsxs)(x.A,{sx:{padding:{xs:2,md:4},minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,p:{xs:1,md:0}},children:[(0,r.jsxs)(a.A,{variant:"h4",component:"h1",sx:{fontWeight:600,color:"#263238"},children:["Welcome, ",null==e?void 0:e.username]}),(0,r.jsx)(d.A,{variant:"outlined",color:"secondary",onClick:()=>{o(),s.push("/login")},startIcon:(0,r.jsx)(w.A,{}),children:"Log Out"})]}),(0,r.jsx)(a.A,{variant:"h5",gutterBottom:!0,sx:{mt:3,mb:2,borderLeft:"4px solid #6C6EEF",color:"#6C6EEF",pl:1},children:"Available Quizzes"}),(0,r.jsx)(p.A,{container:!0,spacing:3,children:i.map(e=>(0,r.jsx)(p.A,{size:12,children:(0,r.jsxs)(f.A,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:2,boxShadow:3,transition:"0.3s","&:hover":{boxShadow:6}},children:[(0,r.jsxs)(A.A,{sx:{flexGrow:1},children:[(0,r.jsx)(a.A,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:600,color:"#6C6EEF"},children:e.quizName}),(0,r.jsx)(m.A,{sx:{mb:1.5}}),(0,r.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{minHeight:40},children:e.description})]}),(0,r.jsxs)(g.A,{sx:{justifyContent:"space-between",p:2,borderTop:"1px solid #eee"},children:[(0,r.jsx)(y.A,{icon:(0,r.jsx)(C.A,{}),label:"".concat(e.questionPerTest," Questions"),color:"info",size:"small",sx:{backgroundColor:"#e8eaf6",color:"#3f51b5"}}),(0,r.jsxs)(d.A,{size:"small",variant:"contained",sx:{backgroundColor:"#6C6EEF","&:hover":{backgroundColor:"#5A5AD0"}},onClick:()=>(e=>{e&&(e.encryption?(I(e),u(!0)):s.push("/quiz?id=".concat(e.quizId)))})(e),children:[e.encryption&&(0,r.jsx)(v.A,{}),"Start Quiz"]})]})]})},e.quizId))}),(0,r.jsx)(S,{open:c,errorMessage:D,onClose:()=>u(!1),onConfirm:K,isLoading:M})]})}},472:(e,t,o)=>{Promise.resolve().then(o.bind(o,116))},556:(e,t,o)=>{"use strict";o.d(t,{A:()=>l,AuthProvider:()=>i});var r=o(5155),n=o(2115);let s=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[o,i]=(0,n.useState)(null),[l,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){console.log("Error parsing user data from localStorage:",e)}a(!1)},[]);let c=e=>{i(e),localStorage.setItem("user",JSON.stringify(e))},u=()=>{i(null),localStorage.removeItem("user")},d=(0,n.useMemo)(()=>({user:o,isAuthenticated:!!o,login:c,logout:u}),[o]);return(0,r.jsx)(s.Provider,{value:d,children:t})},l=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6618:(e,t,o)=>{"use strict";o.d(t,{Hz:()=>n,Ms:()=>r,af:()=>s});let r=e=>{let t=atob(e),o=t.length,r=new Uint8Array(o);for(let e=0;e<o;e++)r[e]=t.charCodeAt(e);return r.buffer},n=async(e,t,o)=>{let r=new TextEncoder().encode(e),n=await crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!0,o)},s=async(e,t,o)=>{let n=r(e),s=r(t),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},o,n);return new TextDecoder().decode(i)}}},e=>{e.O(0,[742,464,624,929,587,161,441,255,358],()=>e(e.s=472)),_N_E=e.O()}]);