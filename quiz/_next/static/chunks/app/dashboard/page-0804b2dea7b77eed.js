(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{116:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var o=r(5155),n=r(2115),s=r(5265),i=r(2021),l=r(9496),a=r(9488),c=r(6929),d=r(6370),u=r(703),h=r(8638),x=r(1574),p=r(6088),f=r(539),A=r(4627),m=r(4839),g=r(2081),y=r(4193),j=r(5694),v=r(63),b=r(556),C=r(2830),w=r(5619),E=r(6618);let S=e=>{let{open:t,errorMessage:r,onClose:x,onConfirm:p,isLoading:f}=e,[A,m]=n.useState(""),g=()=>{p(A)};return(0,o.jsxs)(s.A,{open:t,onClose:x,maxWidth:"xs",fullWidth:!0,children:[(0,o.jsx)(i.A,{children:"Enter Quiz Password"}),(0,o.jsxs)(l.A,{dividers:!0,children:[(0,o.jsx)(a.A,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"This quiz is encrypted. Please enter the correct password to unlock and begin."}),(0,o.jsx)(c.A,{autoFocus:!0,margin:"dense",label:"Password",type:"password",fullWidth:!0,variant:"outlined",value:A,error:""!==r,helperText:r,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),g())}})]}),(0,o.jsxs)(d.A,{children:[(0,o.jsx)(u.A,{onClick:x,color:"primary",children:"Cancel"}),(0,o.jsx)(u.A,{onClick:g,variant:"contained",disabled:!A||f,sx:{backgroundColor:"#6C6EEF","&:hover":{backgroundColor:"#5A5AD0"}},children:f?(0,o.jsx)(h.A,{size:24,color:"inherit"}):"Confirm"})]})]})},z=()=>{let{user:e,isAuthenticated:t,logout:r}=(0,b.A)(),s=(0,v.useRouter)(),[i,l]=n.useState(null),[c,d]=n.useState(!1),[z,k]=n.useState(null),[I,q]=n.useState(""),[P,D]=n.useState(""),[F,K]=n.useState(null);if(n.useEffect(()=>{console.log(">>> isAuthenticated",t),!1===t&&s.replace("/login")},[t,s]),n.useEffect(()=>{!async function(){let e=await fetch("/data/quizzes.json");l(await e.json())}()},[]),n.useEffect(()=>{F&&(async()=>{try{if(!z||!z.encryption)return;let{encryption:e}=z,t=(0,E.Ms)(e.salt),r=await (0,E.Hz)(I,t,["decrypt"]);if(await (0,E.af)(e.challenge,e.iv,r)!==z.quizId){D("Data is corrupted"),K(null);return}let o=["id=".concat(F.id),"salt=".concat(encodeURIComponent(e.salt)),"iv=".concat(encodeURIComponent(e.iv)),"password=".concat(encodeURIComponent(I))].join("&");s.push("/quiz?".concat(o))}catch(e){console.log("[Error]:",e),K(null),D("Incorrect password input, or your browser doesn't support crypto.subtle.decrypt");return}})()},[F]),null===t||!1===t||!i)return(0,o.jsx)(x.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,o.jsx)(h.A,{})});let M=async e=>{z&&(q(e),K({id:z.quizId,key:e}),console.log(e))},N=null!==F;return(0,o.jsxs)(x.A,{sx:{padding:{xs:2,md:4},minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[(0,o.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,p:{xs:1,md:0}},children:[(0,o.jsxs)(a.A,{variant:"h4",component:"h1",sx:{fontWeight:600,color:"#263238"},children:["Welcome, ",null==e?void 0:e.username]}),(0,o.jsx)(u.A,{variant:"outlined",color:"secondary",onClick:()=>{r(),s.push("/login")},startIcon:(0,o.jsx)(w.A,{}),children:"Log Out"})]}),(0,o.jsx)(a.A,{variant:"h5",gutterBottom:!0,sx:{mt:3,mb:2,borderLeft:"4px solid #6C6EEF",color:"#6C6EEF",pl:1},children:"Available Quizzes"}),(0,o.jsx)(p.A,{container:!0,spacing:3,children:i.map(e=>(0,o.jsx)(p.A,{size:12,children:(0,o.jsxs)(f.A,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:2,boxShadow:3,transition:"0.3s","&:hover":{boxShadow:6}},children:[(0,o.jsxs)(A.A,{sx:{flexGrow:1},children:[(0,o.jsx)(a.A,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:600,color:"#6C6EEF"},children:e.quizName}),(0,o.jsx)(m.A,{sx:{mb:1.5}}),(0,o.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{minHeight:40},children:e.description})]}),(0,o.jsxs)(g.A,{sx:{justifyContent:"space-between",p:2,borderTop:"1px solid #eee"},children:[(0,o.jsx)(y.A,{icon:(0,o.jsx)(C.A,{}),label:"".concat(e.questionPerTest," Questions"),color:"info",size:"small",sx:{backgroundColor:"#e8eaf6",color:"#3f51b5"}}),(0,o.jsxs)(u.A,{size:"small",variant:"contained",sx:{backgroundColor:"#6C6EEF","&:hover":{backgroundColor:"#5A5AD0"}},onClick:()=>(e=>{e&&(e.encryption?(k(e),d(!0)):s.push("/quiz?id=".concat(e.quizId)))})(e),children:[e.encryption&&(0,o.jsx)(j.A,{}),"Start Quiz"]})]})]})},e.quizId))}),(0,o.jsx)(S,{open:c,errorMessage:P,onClose:()=>d(!1),onConfirm:M,isLoading:N})]})}},472:(e,t,r)=>{Promise.resolve().then(r.bind(r,116))},556:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>i});var o=r(5155),n=r(2115);let s=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null),[l,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){console.log("Error parsing user data from localStorage:",e)}a(!1)},[]);let c=e=>{i(e),localStorage.setItem("user",JSON.stringify(e))},d=()=>{i(null),localStorage.removeItem("user")},u=(0,n.useMemo)(()=>({user:r,isAuthenticated:!!r,login:c,logout:d}),[r]);return(0,o.jsx)(s.Provider,{value:u,children:t})},l=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6618:(e,t,r)=>{"use strict";r.d(t,{Hz:()=>n,Ms:()=>o,af:()=>s});let o=e=>{let t=atob(e),r=t.length,o=new Uint8Array(r);for(let e=0;e<r;e++)o[e]=t.charCodeAt(e);return o.buffer},n=async(e,t,r)=>{let o=new TextEncoder().encode(e),n=await crypto.subtle.importKey("raw",o,{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!0,r)},s=async(e,t,r)=>{let n=o(e),s=o(t),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},r,n);return new TextDecoder().decode(i)}}},e=>{e.O(0,[742,464,624,929,587,161,441,255,358],()=>e(e.s=472)),_N_E=e.O()}]);