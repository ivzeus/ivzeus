(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27179,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(47167);let n=r.createContext(null);function o(){return r.useContext(n)}let l="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",a=function(e){let{children:a,theme:i}=e,s=o(),c=r.useMemo(()=>{var e,t;let r=null===s?{...i}:(e=s,"function"==typeof(t=i)?t(e):{...e,...t});return null!=r&&(r[l]=null!==s),r},[i,s]);return(0,t.jsx)(n.Provider,{value:c,children:a})};var i=e.i(28419),s=e.i(86931),c=e.i(68308),d=e.i(86373),u=e.i(7558),p=e.i(57242),m=e.i(73852);let h={};function f(e,t,n,o=!1){return r.useMemo(()=>{let r=e&&t[e]||t;if("function"==typeof n){let l=n(r),a=e?{...t,[e]:l}:l;return o?()=>a:a}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,o])}let g=function(e){let{children:r,theme:n,themeId:l}=e,g=(0,s.default)(h),y=o()||h,j=f(l,g,n),b=f(l,y,n,!0),v="rtl"===(l?j[l]:j).direction,x=function(e){let r=(0,s.default)(),n=(0,p.default)()||"",{modularCssLayers:o}=e,l="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return(l=o&&null===r?"string"==typeof o?o.replace(/mui(?!\.)/g,l):`@layer ${l};`:"",(0,u.default)(()=>{let e=document.querySelector("head");if(!e)return;let t=e.firstChild;if(l){if(t&&t.hasAttribute?.("data-mui-layer-order")&&t.getAttribute("data-mui-layer-order")===n)return;let r=document.createElement("style");r.setAttribute("data-mui-layer-order",n),r.textContent=l,e.prepend(r)}else e.querySelector(`style[data-mui-layer-order="${n}"]`)?.remove()},[l,n]),l)?(0,t.jsx)(m.default,{styles:l}):null}(j);return(0,t.jsx)(a,{theme:b,children:(0,t.jsx)(i.ThemeContext.Provider,{value:j,children:(0,t.jsx)(c.default,{value:v,children:(0,t.jsxs)(d.default,{value:l?j[l].components:j.components,children:[x,r]})})})})};var y=e.i(2001);function j({theme:e,...r}){let n=y.default in e?e[y.default]:void 0;return(0,t.jsx)(g,{...r,themeId:n?y.default:void 0,theme:n||e})}var b=e.i(17028),v=e.i(98006);let x="mode",E="color-scheme";function S(){}let w=({key:e,storageWindow:t})=>(t||"undefined"==typeof window||(t=window),{get(r){let n;if("undefined"!=typeof window){if(!t)return r;try{n=t.localStorage.getItem(e)}catch{}return n||r}},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return S;let n=t=>{let n=t.newValue;t.key===e&&r(n)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function C(){}function k(e){if("undefined"!=typeof window&&"function"==typeof window.matchMedia&&"system"===e)return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function O(e,t){return"light"===e.mode||"system"===e.mode&&"light"===e.systemMode?t("light"):"dark"===e.mode||"system"===e.mode&&"dark"===e.systemMode?t("dark"):void 0}var D=e.i(1937),N=e.i(35767);let{CssVarsProvider:A,useColorScheme:T,getInitColorSchemeScript:R}=function(e){let{themeId:n,theme:l={},modeStorageKey:a=x,colorSchemeStorageKey:i=E,disableTransitionOnChange:s=!1,defaultColorScheme:c,resolveTheme:d}=e,p={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},m=r.createContext(void 0),h={},f={},y="string"==typeof c?c:c.light,j="string"==typeof c?c:c.dark;return{CssVarsProvider:function(e){let{children:p,theme:y,modeStorageKey:j=a,colorSchemeStorageKey:b=i,disableTransitionOnChange:S=s,storageManager:D,storageWindow:N="undefined"==typeof window?void 0:window,documentNode:A="undefined"==typeof document?void 0:document,colorSchemeNode:T="undefined"==typeof document?void 0:document.documentElement,disableNestedContext:R=!1,disableStyleSheetGeneration:M=!1,defaultMode:I="system",forceThemeRerender:P=!1,noSsr:K}=e,L=r.useRef(!1),V=o(),_=r.useContext(m),z=!!_&&!R,$=r.useMemo(()=>y||("function"==typeof l?l():l),[y]),F=$[n],W=F||$,{colorSchemes:B=h,components:H=f,cssVarPrefix:U}=W,Y=Object.keys(B).filter(e=>!!B[e]).join(","),G=r.useMemo(()=>Y.split(","),[Y]),J="string"==typeof c?c:c.light,X="string"==typeof c?c:c.dark,Z=B[J]&&B[X]?I:B[W.defaultColorScheme]?.palette?.mode||W.palette?.mode,{mode:q,setMode:Q,systemMode:ee,lightColorScheme:et,darkColorScheme:er,colorScheme:en,setColorScheme:eo}=function(e){let{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:o,supportedColorSchemes:l=[],modeStorageKey:a=x,colorSchemeStorageKey:i=E,storageWindow:s="undefined"==typeof window?void 0:window,storageManager:c=w,noSsr:d=!1}=e,u=l.join(","),p=l.length>1,m=r.useMemo(()=>c?.({key:a,storageWindow:s}),[c,a,s]),h=r.useMemo(()=>c?.({key:`${i}-light`,storageWindow:s}),[c,i,s]),f=r.useMemo(()=>c?.({key:`${i}-dark`,storageWindow:s}),[c,i,s]),[g,y]=r.useState(()=>{let e=m?.get(t)||t,r=h?.get(n)||n,l=f?.get(o)||o;return{mode:e,systemMode:k(e),lightColorScheme:r,darkColorScheme:l}}),[j,b]=r.useState(d||!p);r.useEffect(()=>{b(!0)},[]);let v=O(g,e=>"light"===e?g.lightColorScheme:"dark"===e?g.darkColorScheme:void 0),S=r.useCallback(e=>{y(r=>{if(e===r.mode)return r;let n=e??t;return m?.set(n),{...r,mode:n,systemMode:k(n)}})},[m,t]),D=r.useCallback(e=>{e?"string"==typeof e?e&&!u.includes(e)?console.error(`\`${e}\` does not exist in \`theme.colorSchemes\`.`):y(t=>{let r={...t};return O(t,t=>{"light"===t&&(h?.set(e),r.lightColorScheme=e),"dark"===t&&(f?.set(e),r.darkColorScheme=e)}),r}):y(t=>{let r={...t},l=null===e.light?n:e.light,a=null===e.dark?o:e.dark;return l&&(u.includes(l)?(r.lightColorScheme=l,h?.set(l)):console.error(`\`${l}\` does not exist in \`theme.colorSchemes\`.`)),a&&(u.includes(a)?(r.darkColorScheme=a,f?.set(a)):console.error(`\`${a}\` does not exist in \`theme.colorSchemes\`.`)),r}):y(e=>(h?.set(n),f?.set(o),{...e,lightColorScheme:n,darkColorScheme:o}))},[u,h,f,n,o]),N=r.useCallback(e=>{"system"===g.mode&&y(t=>{let r=e?.matches?"dark":"light";return t.systemMode===r?t:{...t,systemMode:r}})},[g.mode]),A=r.useRef(N);return A.current=N,r.useEffect(()=>{if("function"!=typeof window.matchMedia||!p)return;let e=(...e)=>A.current(...e),t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(e),e(t),()=>{t.removeListener(e)}},[p]),r.useEffect(()=>{if(p){let e=m?.subscribe(e=>{(!e||["light","dark","system"].includes(e))&&S(e||t)})||C,r=h?.subscribe(e=>{(!e||u.match(e))&&D({light:e})})||C,n=f?.subscribe(e=>{(!e||u.match(e))&&D({dark:e})})||C;return()=>{e(),r(),n()}}},[D,S,u,t,s,p,m,h,f]),{...g,mode:j?g.mode:void 0,systemMode:j?g.systemMode:void 0,colorScheme:j?v:void 0,setMode:S,setColorScheme:D}}({supportedColorSchemes:G,defaultLightColorScheme:J,defaultDarkColorScheme:X,modeStorageKey:j,colorSchemeStorageKey:b,defaultMode:Z,storageManager:D,storageWindow:N,noSsr:K}),el=q,ea=en;z&&(el=_.mode,ea=_.colorScheme);let ei=ea||W.defaultColorScheme;W.vars&&!P&&(ei=W.defaultColorScheme);let es=r.useMemo(()=>{let e=W.generateThemeVars?.()||W.vars,t={...W,components:H,colorSchemes:B,cssVarPrefix:U,vars:e};if("function"==typeof t.generateSpacing&&(t.spacing=t.generateSpacing()),ei){let e=B[ei];e&&"object"==typeof e&&Object.keys(e).forEach(r=>{e[r]&&"object"==typeof e[r]?t[r]={...t[r],...e[r]}:t[r]=e[r]})}return d?d(t):t},[W,ei,H,B,U]),ec=W.colorSchemeSelector;(0,u.default)(()=>{if(ea&&T&&ec&&"media"!==ec){let e=ec;if("class"===ec&&(e=".%s"),"data"===ec&&(e="[data-%s]"),ec?.startsWith("data-")&&!ec.includes("%s")&&(e=`[${ec}="%s"]`),e.startsWith("."))T.classList.remove(...G.map(t=>e.substring(1).replace("%s",t))),T.classList.add(e.substring(1).replace("%s",ea));else{let t=e.replace("%s",ea).match(/\[([^\]]+)\]/);if(t){let[e,r]=t[1].split("=");r||G.forEach(t=>{T.removeAttribute(e.replace(ea,t))}),T.setAttribute(e,r?r.replace(/"|'/g,""):"")}else T.setAttribute(e,ea)}}},[ea,ec,T,G]),r.useEffect(()=>{let e;if(S&&L.current&&A){let t=A.createElement("style");t.appendChild(A.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),A.head.appendChild(t),window.getComputedStyle(A.body),e=setTimeout(()=>{A.head.removeChild(t)},1)}return()=>{clearTimeout(e)}},[ea,S,A]),r.useEffect(()=>(L.current=!0,()=>{L.current=!1}),[]);let ed=r.useMemo(()=>({allColorSchemes:G,colorScheme:ea,darkColorScheme:er,lightColorScheme:et,mode:el,setColorScheme:eo,setMode:Q,systemMode:ee}),[G,ea,er,et,el,eo,Q,ee,es.colorSchemeSelector]),eu=!0;(M||!1===W.cssVariables||z&&V?.cssVarPrefix===U)&&(eu=!1);let ep=(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)(g,{themeId:F?n:void 0,theme:es,children:p}),eu&&(0,t.jsx)(v.GlobalStyles,{styles:es.generateStyleSheets?.()||[]})]});return z?ep:(0,t.jsx)(m.Provider,{value:ed,children:ep})},useColorScheme:()=>r.useContext(m)||p,getInitColorSchemeScript:e=>(function(e){let{defaultMode:r="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:o="dark",modeStorageKey:l=x,colorSchemeStorageKey:a=E,attribute:i="data-color-scheme",colorSchemeNode:s="document.documentElement",nonce:c}=e||{},d="",u=i;if("class"===i&&(u=".%s"),"data"===i&&(u="[data-%s]"),u.startsWith(".")){let e=u.substring(1);d+=`${s}.classList.remove('${e}'.replace('%s', light), '${e}'.replace('%s', dark));
      ${s}.classList.add('${e}'.replace('%s', colorScheme));`}let p=u.match(/\[([^[\]]+)\]/);if(p){let[e,t]=p[1].split("=");t||(d+=`${s}.removeAttribute('${e}'.replace('%s', light));
      ${s}.removeAttribute('${e}'.replace('%s', dark));`),d+=`
      ${s}.setAttribute('${e}'.replace('%s', colorScheme), ${t?`${t}.replace('%s', colorScheme)`:'""'});`}else d+=`${s}.setAttribute('${u}', colorScheme);`;return(0,t.jsx)("script",{suppressHydrationWarning:!0,nonce:"undefined"==typeof window?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${l}') || '${r}';
  const dark = localStorage.getItem('${a}-dark') || '${o}';
  const light = localStorage.getItem('${a}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${d}
  }
} catch(e){}})();`}},"mui-color-scheme-init")})({colorSchemeStorageKey:i,defaultLightColorScheme:y,defaultDarkColorScheme:j,modeStorageKey:a,...e})}}({themeId:y.default,theme:()=>(0,D.default)({cssVariables:!0}),colorSchemeStorageKey:"mui-color-scheme",modeStorageKey:"mui-mode",defaultColorScheme:{light:"light",dark:"dark"},resolveTheme:e=>{let t={...e,typography:(0,N.default)(e.palette,e.typography)};return t.unstable_sx=function(e){return(0,b.default)({sx:e,theme:this})},t}});function M({theme:e,...n}){let o=r.useMemo(()=>{if("function"==typeof e)return e;let t=y.default in e?e[y.default]:e;return"colorSchemes"in t?null:"vars"in t?e:{...e,vars:null}},[e]);return o?(0,t.jsx)(j,{theme:o,...n}):(0,t.jsx)(A,{theme:e,...n})}var I=e.i(6376),P=e.i(35642),K=e.i(94425);let L="function"==typeof(0,P.globalCss)({}),V=(e,t=!1)=>{let r={};t&&e.colorSchemes&&"function"==typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach(([t,n])=>{let o=e.getColorSchemeSelector(t);o.startsWith("@")?r[o]={":root":{colorScheme:n.palette?.mode}}:r[o.replace(/\s*&/,"")]={colorScheme:n.palette?.mode}});let n={html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...{color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}},"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r},o=e.components?.MuiCssBaseline?.styleOverrides;return o&&(n=[n,o]),n},_="mui-ecs",z=(0,P.globalCss)(L?({theme:e,enableColorScheme:t})=>V(e,t):({theme:e})=>{let t,r;return r=Array.isArray(t=V(e,!1))?t[0]:t,!e.vars&&r&&(r.html[`:root:has(${_})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([t,n])=>{let o=e.getColorSchemeSelector(t);o.startsWith("@")?r[o]={[`:root:not(:has(.${_}))`]:{colorScheme:n.palette?.mode}}:r[o.replace(/\s*&/,"")]={[`&:not(:has(.${_}))`]:{colorScheme:n.palette?.mode}}}),t}),$=function(e){let{children:n,enableColorScheme:o=!1}=(0,K.useDefaultProps)({props:e,name:"MuiCssBaseline"});return(0,t.jsxs)(r.Fragment,{children:[L&&(0,t.jsx)(z,{enableColorScheme:o}),!L&&!o&&(0,t.jsx)("span",{className:_,style:{display:"none"}}),n]})},F=(0,I.createTheme)({palette:{mode:"light"}});function W({children:e}){return(0,t.jsxs)(M,{theme:F,children:[(0,t.jsx)($,{}),e]})}e.s(["default",()=>W],27179)},6583,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(30966),o=e.i(43090),l=e.i(62437),a=e.i(81974),i=e.i(24167),s=e.i(39126),c=e.i(10081),d=e.i(36807),u=e.i(19646),p=e.i(36151),m=e.i(32412);e.i(47167);var h=e.i(7670),f=e.i(19130),g=e.i(93224),y=e.i(40799),j=e.i(75149),b=e.i(94425),v=e.i(96928),x=e.i(19636),E=e.i(36561),S=e.i(40672),w=e.i(19727);function C(e){return(0,w.default)("MuiListItem",e)}(0,S.default)("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);let k=(0,S.default)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function O(e){return(0,w.default)("MuiListItemSecondaryAction",e)}(0,S.default)("MuiListItemSecondaryAction",["root","disableGutters"]);let D=(0,y.styled)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),N=r.forwardRef(function(e,n){let o=(0,b.useDefaultProps)({props:e,name:"MuiListItemSecondaryAction"}),{className:l,...a}=o,i=r.useContext(E.default),s={...o,disableGutters:i.disableGutters},c=(e=>{let{disableGutters:t,classes:r}=e;return(0,f.default)({root:["root",t&&"disableGutters"]},O,r)})(s);return(0,t.jsx)(D,{className:(0,h.default)(c.root,l),ownerState:s,ref:n,...a})});N.muiName="ListItemSecondaryAction";let A=(0,y.styled)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]}})((0,j.default)(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${k.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),T=(0,y.styled)("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),R=r.forwardRef(function(e,n){let o=(0,b.useDefaultProps)({props:e,name:"MuiListItem"}),{alignItems:l="center",children:a,className:i,component:s,components:c={},componentsProps:d={},ContainerComponent:u="li",ContainerProps:{className:p,...m}={},dense:y=!1,disableGutters:j=!1,disablePadding:S=!1,divider:w=!1,secondaryAction:k,slotProps:O={},slots:D={},...R}=o,M=r.useContext(E.default),I=r.useMemo(()=>({dense:y||M.dense||!1,alignItems:l,disableGutters:j}),[l,M.dense,y,j]),P=r.useRef(null),K=r.Children.toArray(a),L=K.length&&(0,v.default)(K[K.length-1],["ListItemSecondaryAction"]),V={...o,alignItems:l,dense:I.dense,disableGutters:j,disablePadding:S,divider:w,hasSecondaryAction:L},_=(e=>{let{alignItems:t,classes:r,dense:n,disableGutters:o,disablePadding:l,divider:a,hasSecondaryAction:i}=e;return(0,f.default)({root:["root",n&&"dense",!o&&"gutters",!l&&"padding",a&&"divider","flex-start"===t&&"alignItemsFlexStart",i&&"secondaryAction"],container:["container"]},C,r)})(V),z=(0,x.default)(P,n),$=D.root||c.Root||A,F=O.root||d.root||{},W={className:(0,h.default)(_.root,F.className,i),...R},B=s||"li";return L?(B=W.component||s?B:"div","li"===u&&("li"===B?B="div":"li"===W.component&&(W.component="div")),(0,t.jsx)(E.default.Provider,{value:I,children:(0,t.jsxs)(T,{as:u,className:(0,h.default)(_.container,p),ref:z,ownerState:V,...m,children:[(0,t.jsx)($,{...F,...!(0,g.default)($)&&{as:B,ownerState:{...V,...F.ownerState}},...W,children:K}),K.pop()]})})):(0,t.jsx)(E.default.Provider,{value:I,children:(0,t.jsxs)($,{...F,as:B,ref:z,...!(0,g.default)($)&&{ownerState:{...V,...F.ownerState}},...W,children:[K,k&&(0,t.jsx)(N,{children:k})]})})});var M=e.i(54624);let I=(0,M.default)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),P=(0,M.default)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var K=e.i(26863);let L=["inverter","succeeder","repeat till success","repeat till failure"],V=["attack","cast_skill","move_to_check_point","guard","pursue"];function _(){let[e,h]=(0,r.useState)(!1),f=(0,n.default)(e=>e.decoratorTypes),g=(0,n.default)(e=>e.actionTypes),y=(0,n.default)(e=>e.setDecoratorTypes),j=(0,n.default)(e=>e.setActionTypes),[b,v]=(0,r.useState)(()=>f??L),[x,E]=(0,r.useState)(()=>g??V),[S,w]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),O=()=>h(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.default,{"aria-label":"settings",onClick:()=>h(!0),children:(0,t.jsx)(l.default,{})}),(0,t.jsxs)(a.default,{open:e,onClose:O,fullWidth:!0,maxWidth:"sm",children:[(0,t.jsx)(i.default,{children:"Configure Behavior Tree Constants"}),(0,t.jsxs)(s.default,{children:[(0,t.jsxs)(u.default,{sx:{mt:1},children:[(0,t.jsx)(K.default,{variant:"h6",children:"Decorators"}),(0,t.jsx)(m.default,{dense:!0,children:b.map((e,r)=>(0,t.jsxs)(R,{children:[(0,t.jsx)(p.default,{value:e,onChange:e=>{var t;return t=e.target.value,void v(e=>e.map((e,n)=>n===r?t:e))},size:"small",fullWidth:!0}),(0,t.jsx)(N,{children:(0,t.jsx)(o.default,{edge:"end","aria-label":"delete-decorator",onClick:()=>{v(e=>e.filter((e,t)=>t!==r))},children:(0,t.jsx)(I,{})})})]},`${e}-${r}`))}),(0,t.jsxs)(u.default,{sx:{display:"flex",gap:1,mt:1},children:[(0,t.jsx)(p.default,{value:S,onChange:e=>w(e.target.value),size:"small",placeholder:"Add decorator...",fullWidth:!0}),(0,t.jsx)(d.default,{variant:"outlined",onClick:()=>{let e=S.trim();e&&(v(t=>[...t,e]),w(""))},startIcon:(0,t.jsx)(P,{}),children:"Add"})]})]}),(0,t.jsxs)(u.default,{sx:{mt:3},children:[(0,t.jsx)(K.default,{variant:"h6",children:"Actions"}),(0,t.jsx)(m.default,{dense:!0,children:x.map((e,r)=>(0,t.jsxs)(R,{children:[(0,t.jsx)(p.default,{value:e,onChange:e=>{var t;return t=e.target.value,void E(e=>e.map((e,n)=>n===r?t:e))},size:"small",fullWidth:!0}),(0,t.jsx)(N,{children:(0,t.jsx)(o.default,{edge:"end","aria-label":"delete-action",onClick:()=>{E(e=>e.filter((e,t)=>t!==r))},children:(0,t.jsx)(I,{})})})]},`${e}-${r}`))}),(0,t.jsxs)(u.default,{sx:{display:"flex",gap:1,mt:1},children:[(0,t.jsx)(p.default,{value:C,onChange:e=>k(e.target.value),size:"small",placeholder:"Add action...",fullWidth:!0}),(0,t.jsx)(d.default,{variant:"outlined",onClick:()=>{let e=C.trim();e&&(E(t=>[...t,e]),k(""))},startIcon:(0,t.jsx)(P,{}),children:"Add"})]})]})]}),(0,t.jsxs)(c.default,{children:[(0,t.jsx)(d.default,{onClick:O,children:"Cancel"}),(0,t.jsx)(d.default,{onClick:()=>{y(b),j(x),console.info("Decorators saved:",b),console.info("Actions saved:",x),h(!1)},variant:"contained",color:"primary",children:"Save"})]})]})]})}e.s(["default",()=>_],6583)},89032,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(36807),o=e.i(54624);let l=(0,o.default)((0,t.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");var a=e.i(81974),i=e.i(24167),s=e.i(39126),c=e.i(10081),d=e.i(36151);let u=(e,t,r,n,o)=>{if(!n)throw Error(null!=o?o:`Invalid property path: ${t}
Couldn't access "${r}" in ${JSON.stringify(e)}`)},p=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),m=(e,t)=>e.filter((e,r)=>r!==t),h=(e,t,r,n)=>{var o;let l=p(e)?Object.assign({},e):null,a=Array.isArray(e)?[...e]:null;if(0===t.length)return e;if(!l&&!a)throw Error("Can't assign property -- invalid input object");let{createNew:i,remove:s,noError:c,fullData:d,fullPath:y}=n,j=t[0];if(a&&"string"==typeof j)return a.map(e=>h(e,t,r,n));if(1===t.length){if(l&&"string"==typeof j){let e=f(l,j,r,n);return null!=e?e:l}return a&&"number"==typeof j?(g(a,j,r,n),a):(u(d,y,j,c),e)}let b=l||a||[];if(s&&2===t.length&&"number"==typeof t[1]){let e=b[j],r=t[1];return Array.isArray(e)?b[j]=m(e,r):u(d,y,j,c,"Trying to remove an indexed item from an object that is not an array"),b}let v=t.slice(1);if(j in e){if(!Array.isArray(o=b[j])&&!p(o)){if(!i)return u(d,y,j,c),b;b[j]={}}return b[j]=h(b[j],v,r,n),b}if(i){let e="number"==typeof v[0]?[]:{};if(l)return b[j]=e,b[j]=h(b[j],v,r,n),b;if(a&&Array.isArray(b)){b.push(e);let t=b.length-1;return b[t]=h(b[t],v,r,n),b}}return u(d,y,j,c),b},f=(e,t,r,n)=>{let{remove:o,createNew:l,noError:a,insertAfter:i,insertBefore:s,fullData:c,fullPath:d}=n;if(void 0!==s||void 0!==i){let n=Object.entries(e),o=1/0;return o="number"==typeof s?s:"number"==typeof i?i:n.findIndex(([e,t])=>e===(null!=s?s:i)),i&&o++,n.splice(o,0,[t,r]),Object.fromEntries(n)}let p=t in e;o?p?delete e[t]:u(c,d,t,a):l||p?e[t]=r:u(c,d,t,a)},g=(e,t,r,n)=>{let{noError:o,fullData:l,fullPath:a,createNew:i,insert:s}=n;s&&e.splice(t,0,r),t in e?e[t]=r:i?e.push(r):u(l,a,t,o)},y=(e,t,r)=>{let n=Array.isArray(t)?t:j(t);if(0===n.length)return e;let o=n[0];if(Array.isArray(e)&&"number"!=typeof o)return e.map(e=>y(e,n,r));if("object"!=typeof e||null===e||!(o in e))return b(e,o,r);let l=e[o];return 1===n.length?l:y(l,n.slice(1),r)},j=e=>e.split(/(\.|\[\d+\])/).filter(e=>"."!==e&&""!==e).map(e=>{let t=/\[(\d+)\]/.exec(e);return t?Number(t[1]):e}).flat(),b=(e,t,r)=>{if(void 0===r)throw Error(`Unable to extract object property
Looking for property: ${t}
In object: ${JSON.stringify(e)}`);return r};function v(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function x(e,t,r,n){return new(r||(r=Promise))(function(o,l){function a(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,i)}s((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;let E=({className:e,name:r,value:n,setValue:o,handleKeyPress:l,styles:a,textAreaRef:i})=>{if("string"!=typeof n)return null;let s="\n"===n.slice(-1)?n+".":n;return(0,t.jsxs)("div",{style:{display:"grid"},children:[(0,t.jsx)("textarea",{id:`${r}_textarea`,ref:i,style:Object.assign({height:"auto",gridArea:"1 / 1 / 2 / 2",overflowY:"auto",whiteSpace:"pre-wrap"},a),rows:1,className:e,name:`${r}_textarea`,value:n,onChange:e=>o(e.target.value),autoFocus:!0,onFocus:e=>{n.length<40&&e.target.select()},onKeyDown:l}),(0,t.jsx)("span",{className:e,style:Object.assign({visibility:"hidden",height:"auto",gridArea:"1 / 1 / 2 / 2",color:"red",opacity:.9,whiteSpace:"pre-wrap",overflowY:"auto",border:"1px solid transparent"},a),children:s})]})},S=e=>null!==e&&"object"==typeof e,w=(e,t,r,n="")=>{if(!r&&!n)return!0;switch(e){case"collection":if(r){if(r(t,n))return!0;if(!C(n,t,r))return!1}if(!r&&n&&!C(n,t))return!1;break;case"value":if(r&&!r(t,n)||!r&&n&&!k(t,n))return!1}return!0},C=(e="",t,r=k)=>{let n=t.value;return Object.entries(n).some(([o,l])=>{let a=[...t.path,o],i=Object.assign(Object.assign({},t),{key:o,path:a,level:t.level+1,value:l,size:a.length,parentData:n});return S(l)?C(e,i,r):r(i,e)})},k=(e,t="")=>{let{value:r}=e;if(null===r&&"null".includes(t.toLowerCase()))return!0;switch(typeof r){case"string":return r.toLowerCase().includes(t.toLowerCase());case"number":return!!String(r).includes(t);case"boolean":return r?"true".includes(t.toLowerCase())||"1"===t:"false".includes(t.toLowerCase())||"0"===t;default:return!1}},O=({key:e,path:t},r="")=>!!k({value:e},r)||!!t.some(e=>k({value:e},r)),D=(e,t)=>(null!=t?t:"")+e.map(e=>""===e?"\0":e).join("."),N=e=>e.shiftKey?"Shift":e.metaKey?"Meta":e.ctrlKey?"Control":e.altKey?"Alt":void 0,A=(e,t,r)=>{let n=e.key,o=N(e);if(Array.isArray(t))return!!o&&t.includes(o);let{key:l,modifier:a}=t;return("stringLineBreak"!==r||"Enter"!==n||"Shift"!==o||"Enter"!==l||!(null==a?void 0:a.includes("Shift")))&&n===l&&(a===o||Array.isArray(a)&&a.includes(o))},T={key:"Enter"},R={confirm:T,cancel:{key:"Escape"},objectConfirm:Object.assign(Object.assign({},T),{modifier:["Meta","Shift","Control"]}),objectLineBreak:T,stringConfirm:T,stringLineBreak:Object.assign(Object.assign({},T),{modifier:["Shift"]}),numberConfirm:T,numberUp:{key:"ArrowUp"},numberDown:{key:"ArrowDown"},tabForward:{key:"Tab"},tabBack:{key:"Tab",modifier:"Shift"},booleanConfirm:T,booleanToggle:{key:" "},clipboardModifier:["Meta","Control"],collapseModifier:["Alt"]},M=(e,t,r="next",n)=>{let o=t.slice(0,t.length-1),l=t.slice(-1)[0];if(void 0===l)return null;let a=y(e,o),i=P(a);Array.isArray(a)||n(i,({key:e,value:t})=>[e,t]);let s=i.findIndex(e=>e.key===l),c=i[s+("next"===r?1:-1)];return c?S(c.value)?0===Object.keys(c.value).length?M(e,[...o,c.key],r,n):I(e,[...o,c.key],r,n):[...o,c.key]:0===o.length?null:M(e,o,r,n)},I=(e,t,r="next",n)=>{let o=y(e,t);if(!S(o))return t;let l=Array.isArray(o)?o.map((e,t)=>t):Object.keys(o);return n(l,e=>[e,o]),I(e,[...t,"next"===r?l[0]:l[l.length-1]],r,n)},P=e=>Array.isArray(e)?e.map((e,t)=>({index:t,value:e,key:t})):Object.entries(e).map(([e,t],r)=>({key:e,value:t,index:r})),K=(e,t)=>{var r,n,o,l;let a=e.current,i=null!=(r=null==a?void 0:a.selectionStart)?r:1/0,s=null!=(n=null==a?void 0:a.selectionEnd)?n:1/0,c=(null==(o=null==a?void 0:a.textContent)?void 0:o.slice(0,i))+t+(null==(l=null==a?void 0:a.textContent)?void 0:l.slice(s));return a.value=c,null==a||a.setSelectionRange(i+1,i+1),c},L=e=>{if(e!==V){if(Array.isArray(e))return e.map(e=>L(e));if(e&&"object"==typeof e)for(let t in e)e[t]=L(e[t]);return e}},V="__â€‹undefined__",_={displayName:"Default",fragments:{edit:"rgb(42, 161, 152)"},styles:{container:{backgroundColor:"#f6f6f6",fontFamily:"monospace"},collection:{},collectionInner:{},collectionElement:{},dropZone:{},property:"#292929",bracket:{color:"rgb(0, 43, 54)",fontWeight:"bold"},itemCount:{color:"rgba(0, 0, 0, 0.3)",fontStyle:"italic"},string:"rgb(203, 75, 22)",number:"rgb(38, 139, 210)",boolean:"green",null:{color:"rgb(220, 50, 47)",fontVariant:"small-caps",fontWeight:"bold"},input:["#292929"],inputHighlight:"#b3d8ff",error:{fontSize:"0.8em",color:"red",fontWeight:"bold"},iconCollection:"rgb(0, 43, 54)",iconEdit:"edit",iconDelete:"rgb(203, 75, 22)",iconAdd:"edit",iconCopy:"rgb(38, 139, 210)",iconOk:"green",iconCancel:"rgb(203, 75, 22)"}},z=(0,r.createContext)({getStyles:()=>({}),icons:{}}),$=({theme:e=_,icons:r={},docRoot:n,children:o})=>{let l=W(e,n);return(0,t.jsx)(z.Provider,{value:{getStyles:(e,t)=>"function"==typeof l[e]?l[e](t):l[e],icons:r},children:o})},F=()=>(0,r.useContext)(z),W=(e,t)=>{var r,n,o,l;let a={},i=(Array.isArray(e)?e:[e]).map(e=>H(e)?B({fragments:{},styles:e},a):B(e,a)),s=B(_,{});Object.keys(s).forEach(e=>{i.forEach(t=>{t[e]&&(s[e]=Object.assign(Object.assign({},s[e]),t[e]))})});let c=Object.assign({},s);return Object.entries(a).forEach(([e,t])=>{c[e]=r=>{let n=t(r)||{};return Object.assign(Object.assign({},s[e]),n)}}),"function"!=typeof(null==c?void 0:c.inputHighlight)&&(null==(r=null==c?void 0:c.inputHighlight)?void 0:r.backgroundColor)&&t.style.setProperty("--jer-highlight-color",null==(n=null==c?void 0:c.inputHighlight)?void 0:n.backgroundColor),"function"!=typeof(null==c?void 0:c.iconCopy)&&(null==(o=null==c?void 0:c.iconCopy)?void 0:o.color)&&t.style.setProperty("--jer-icon-copy-color",null==(l=null==c?void 0:c.iconCopy)?void 0:l.color),c},B=(e,t)=>{let{fragments:r,styles:n}=e,o={};return Object.entries(n).forEach(([e,n])=>{let l=(Array.isArray(n)?n:[n]).reduce((n,o)=>{var l,a;if("function"==typeof o)return t[e]=o,Object.assign({},n);if("string"==typeof o){let t=null!=(l=null==r?void 0:r[o])?l:o;return"string"==typeof t?Object.assign(Object.assign({},n),{[null!=(a=U[e])?a:"color"]:t}):Object.assign(Object.assign({},n),t)}return Object.assign(Object.assign({},n),o)},{});o[e]=l}),o},H=e=>!("styles"in e),U={container:"backgroundColor",collection:"backgroundColor",collectionInner:"backgroundColor",collectionElement:"backgroundColor",dropZone:"borderColor",inputHighlight:"backgroundColor"},Y=(0,r.createContext)(null),G=({children:e,onEditEvent:n,onCollapse:o})=>{let[l,a]=(0,r.useState)(null),[i,s]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,p]=(0,r.useState)({path:null,pathString:null}),m=(0,r.useRef)(null),h=(0,r.useRef)("next"),f=(0,r.useRef)(null);return(0,t.jsx)(Y.Provider,{value:{collapseState:l,setCollapseState:e=>{a(e),o&&null!==e&&(Array.isArray(e)?e.forEach(e=>o(e)):o(e)),null!==e&&setTimeout(()=>a(null),2e3)},getMatchingCollapseState:e=>{if(Array.isArray(l)){for(let t of l)if(X(e,t))return t;return null}return X(e,l)?l:null},currentlyEditingElement:i,setCurrentlyEditingElement:(e,t)=>{let r="string"==typeof e||null===e?e:D(e,"key"===t?"key_":void 0);null!==i&&null!==r&&null!==m.current&&m.current(),s(r),n&&(Array.isArray(e)||null===e)&&n(e,"key"===t),m.current="function"==typeof t?t:null},areChildrenBeingEdited:e=>null!==i&&i.includes(e),previouslyEditedElement:f.current,setPreviouslyEditedElement:e=>{f.current=e},tabDirection:h.current,setTabDirection:e=>{h.current=e},previousValue:c,setPreviousValue:d,dragSource:u,setDragSource:p},children:e})},J=()=>{let e=(0,r.useContext)(Y);if(!e)throw Error("Missing Context Provider");return e},X=(e,t)=>{if(null===t)return!1;if(!t.includeChildren)return t.path.every((t,r)=>e[r]===t)&&t.path.length===e.length;for(let[r,n]of t.path.entries())if(n!==e[r])return!1;return!0},Z="**INVALID_FUNCTION**",q=({nodeData:e,showStringQuotes:n=!0,stringTruncate:o=200,pathString:l,canEdit:a,setIsEditing:i,styles:s,translate:c,value:d,TextWrapper:u=({children:e})=>e})=>{let p=null!=d?d:e.value,[m,h]=(0,r.useState)(!1),f=n?'"':"",g=p.length>o,y=()=>{a?i(!0):h(!m)};return(0,t.jsxs)("div",{id:`${l}_display`,onDoubleClick:y,onClick:e=>{(e.getModifierState("Control")||e.getModifierState("Meta"))&&y()},className:"jer-value-string",style:s,children:[f,g?(0,t.jsxs)(t.Fragment,m?{children:[(0,t.jsx)(u,{children:(0,t.jsxs)("span",{children:[p,f]})}),(0,t.jsxs)("span",{className:"jer-string-expansion jer-show-less",onClick:()=>h(!1),children:[" ",c("SHOW_LESS",e)]})]}:{children:[(0,t.jsxs)(u,{children:[(0,t.jsx)("span",{children:p.slice(0,o-2).trimEnd()})," "]}),(0,t.jsx)("span",{className:"jer-string-expansion jer-ellipsis",onClick:()=>h(!0),children:"..."}),f]}):(0,t.jsx)(u,{children:`${p}${f}`})]})},Q=({styles:e,pathString:n,value:o,setValue:l,handleEdit:a,handleKeyboard:i,keyboardCommon:s})=>{let c=(0,r.useRef)(null);return(0,t.jsx)(E,{className:"jer-input-text",textAreaRef:c,name:n,value:o,setValue:l,handleKeyPress:e=>{i(e,Object.assign({stringConfirm:a,stringLineBreak:()=>{l(K(c,"\n"))}},s))},styles:e})},ee=e=>{var{isEditing:r,path:n,enumType:o}=e,l=v(e,["isEditing","path","enumType"]);let{getStyles:a}=F(),i=D(n),{value:s,setValue:c,nodeData:d,handleEdit:u,handleKeyboard:p,keyboardCommon:m}=l;return r&&o?(0,t.jsxs)("div",{className:"jer-select jer-select-enums",children:[(0,t.jsx)("select",{name:`${i}-value-select`,className:"jer-select-inner",onChange:e=>c(e.target.value),value:s,autoFocus:!0,onKeyDown:e=>{p(e,Object.assign({stringConfirm:u},m))},children:o.values.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)("span",{className:"focus"})]}):r?(0,t.jsx)(Q,Object.assign({styles:a("input",d),pathString:i},l,{setValue:l.setValue})):(0,t.jsx)(q,Object.assign({pathString:i,styles:a("string",d)},l))},et=({value:e,setValue:r,isEditing:n,path:o,setIsEditing:l,handleEdit:a,nodeData:i,handleKeyboard:s,keyboardCommon:c})=>{let{getStyles:d}=F();return n?(0,t.jsx)("input",{className:"jer-input-number",type:"text",name:D(o),value:e,onChange:e=>r(e.target.value.replace(/[^0-9.-]/g,"")),autoFocus:!0,onFocus:e=>setTimeout(()=>e.target.select(),10),onKeyDown:t=>s(t,Object.assign({numberConfirm:a,numberUp:()=>r(Number(e)+1),numberDown:()=>r(Number(e)-1)},c)),style:Object.assign({width:String(e).length/1.5+2+"em"},d("input",i))}):(0,t.jsx)("span",{onDoubleClick:()=>l(!0),className:"jer-value-number",style:d("number",i),children:e})},er=({value:e,setValue:r,isEditing:n,path:o,setIsEditing:l,handleEdit:a,nodeData:i,handleKeyboard:s,keyboardCommon:c})=>{let{getStyles:d}=F();return"boolean"!=typeof e?null:n?(0,t.jsx)("input",{className:"jer-input-boolean",type:"checkbox",name:D(o),checked:e,onChange:()=>r(!e),onKeyDown:t=>{" "===t.key&&t.preventDefault(),s(t,Object.assign({booleanConfirm:a,booleanToggle:()=>r(!e)},c))},autoFocus:!0}):(0,t.jsx)("span",{onDoubleClick:()=>l(!0),className:"jer-value-boolean",style:d("boolean",i),children:String(e)})},en=({value:e,isEditing:n,setIsEditing:o,handleEdit:l,nodeData:a,handleKeyboard:i,keyboardCommon:s})=>{var c;let d,u,p,{getStyles:m}=F();return c=e=>i(e,Object.assign({confirm:l},s)),d=(0,r.useRef)(void 0),u=(0,r.useRef)(c),(0,r.useEffect)(()=>{u.current=c},[c]),p=e=>{u.current(e)},(0,r.useEffect)(()=>{if(window.clearTimeout(d.current),n)return d.current=window.setTimeout(()=>{window.addEventListener("keydown",p)},100),()=>{window.clearTimeout(d.current),window.removeEventListener("keydown",p)}},[n]),(0,t.jsx)("div",{onDoubleClick:()=>o(!0),className:"jer-value-null",style:m("null",a),children:String(e)})},eo=({value:e})=>{let r="Error!";switch(typeof e){case"string":e===Z&&(r="Function");break;case"undefined":r="Undefined";break;case"symbol":r="Symbol"}return(0,t.jsx)("span",{className:"jer-value-invalid",children:r})},el=({size:e,style:r,className:n})=>(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:r,children:[(0,t.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z"}),(0,t.jsx)("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"})]}),ea=({size:e,style:r,className:n})=>(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:r,transform:"translate(0, 0.5)",children:[(0,t.jsx)("path",{d:"M7 17.013l4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}),(0,t.jsx)("path",{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"})]}),ei=({size:e,style:r,className:n})=>(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:r,children:(0,t.jsx)("path",{d:"M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12m2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12M15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"})}),es=({size:e,style:r,className:n})=>(0,t.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e,height:e,className:n,style:r,children:[(0,t.jsx)("path",{d:"M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z"}),(0,t.jsx)("path",{d:"M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2M16 4h2a2 2 0 012 2v4M21 14H11"}),(0,t.jsx)("path",{d:"M15 10l-4 4 4 4"})]}),ec=({size:e,style:r,className:n})=>(0,t.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e,height:e,className:n,style:r,children:[(0,t.jsx)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,t.jsx)("path",{d:"M22 4L12 14.01l-3-3"})]}),ed=({size:e,style:r,className:n})=>(0,t.jsx)("svg",{baseProfile:"tiny",viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:n,style:r,children:(0,t.jsx)("path",{d:"M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm-5 8c0-.832.224-1.604.584-2.295l6.711 6.711A4.943 4.943 0 0112 17c-2.757 0-5-2.243-5-5zm9.416 2.295L9.705 7.584A4.943 4.943 0 0112 7c2.757 0 5 2.243 5 5 0 .832-.224 1.604-.584 2.295z"})}),eu=({size:e,style:r,className:n})=>(0,t.jsx)("svg",{viewBox:"0 0 512 512",fill:"currentColor",width:e,height:e,className:n,style:r,children:(0,t.jsx)("path",{d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"})}),ep=({name:e,nodeData:r})=>{var n,o,l,a,i,s,c;let{getStyles:d,icons:u}=F(),p={size:"1.4em",className:"jer-icon"};switch(e){case"add":return null!=(n=null==u?void 0:u.add)?n:(0,t.jsx)(el,Object.assign({},p,{style:d("iconAdd",r)}));case"edit":return null!=(o=null==u?void 0:u.edit)?o:(0,t.jsx)(ea,Object.assign({},p,{style:d("iconEdit",r)}));case"delete":return null!=(l=null==u?void 0:u.delete)?l:(0,t.jsx)(ei,Object.assign({},p,{style:d("iconDelete",r),size:"1.45em"}));case"copy":return null!=(a=null==u?void 0:u.copy)?a:(0,t.jsx)(es,Object.assign({},p,{style:d("iconCopy",r),size:"1.2em"}));case"ok":return null!=(i=null==u?void 0:u.ok)?i:(0,t.jsx)(ec,Object.assign({},p,{style:Object.assign({fontSize:"90%"},d("iconOk",r))}));case"cancel":return null!=(s=null==u?void 0:u.cancel)?s:(0,t.jsx)(ed,Object.assign({},p,{style:Object.assign({fontSize:"130%"},d("iconCancel",r))}));case"chevron":return null!=(c=null==u?void 0:u.chevron)?c:(0,t.jsx)(eu,{size:"1em",style:d("iconCollection",r)});default:return(0,t.jsx)(t.Fragment,{})}},em=({startEdit:e,handleDelete:n,handleAdd:o,enableClipboard:l,type:a,customButtons:i,nodeData:s,translate:c,keyboardControls:d,handleKeyboard:u,editConfirmRef:p,getNewKeyOptions:m,jsonStringify:h,onEditEvent:f,showIconTooltips:g})=>{let{getStyles:j}=F(),b=c("KEY_NEW",s),[v,x]=(0,r.useState)(b),[E,S]=(0,r.useState)(!1),{key:w,path:C,value:k}=s,O=Array.isArray(E),D=e=>{var t;if(f&&f(e?[...C,null]:null,e),!e)return void S(!1);let r=Object.keys(y(s.fullData,C)),n=m?null==(t=m(s))?void 0:t.filter(e=>!r.includes(e)):null;n&&x(""),S(null==n||n)};return(0,t.jsxs)("div",{className:"jer-edit-buttons",style:{opacity:E?1:void 0},onClick:e=>e.stopPropagation(),children:[l&&(0,t.jsx)("div",{onClick:e=>{var t;e.stopPropagation();let r,n,o="value",a="",i=null;if(l){let s=N(e);if(s&&d.clipboardModifier.includes(s)?(a=r=ef(C),o="path"):a="object"==typeof(r=k)?h(k):String(r),!navigator.clipboard)return void("function"==typeof l&&l({success:!1,value:r,stringValue:a,path:C,key:w,type:o,errorMessage:"Can't access clipboard API"}));null==(t=navigator.clipboard)||t.writeText(a).then(()=>n=!0).catch(e=>{n=!1,i=e.message}).finally(()=>{"function"==typeof l&&l({success:n,errorMessage:i,value:r,stringValue:a,path:C,key:w,type:o})})}},className:"jer-copy-pulse",title:g?c("TOOLTIP_COPY",s):"",children:(0,t.jsx)(ep,{name:"copy",nodeData:s})}),e&&(0,t.jsx)("div",{onClick:e,title:g?c("TOOLTIP_EDIT",s):"",children:(0,t.jsx)(ep,{name:"edit",nodeData:s})}),n&&(0,t.jsx)("div",{onClick:n,title:g?c("TOOLTIP_DELETE",s):"",children:(0,t.jsx)(ep,{name:"delete",nodeData:s})}),o&&(0,t.jsx)("div",{onClick:()=>{"object"===a?D(!0):o("")},title:g?c("TOOLTIP_ADD",s):"",children:(0,t.jsx)(ep,{name:"add",nodeData:s})}),null==i?void 0:i.map(({Element:e,onClick:r},n)=>(0,t.jsx)("div",{onClick:e=>r&&r(s,e),children:(0,t.jsx)(e,{nodeData:s})},n)),E&&o&&"object"===a&&(0,t.jsxs)(t.Fragment,{children:[O?(0,t.jsxs)("div",{className:"jer-select jer-select-keys",children:[(0,t.jsxs)("select",{name:"new-key-select",className:"jer-select-inner",onChange:e=>{o(e.target.value),D(!1)},defaultValue:"",autoFocus:!0,onKeyDown:e=>{u(e,{cancel:()=>D(!1)})},children:[(0,t.jsx)("option",{value:"",disabled:!0,children:E.length>0?c("KEY_SELECT",s):c("NO_KEY_OPTIONS",s)}),E.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("span",{className:"focus"})]}):(0,t.jsx)("input",{className:"jer-input-new-key",type:"text",name:"new-object-key",value:v,onChange:e=>x(e.target.value),autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>{u(e,{stringConfirm:()=>{o&&(D(!1),o(v),x(b))},cancel:()=>{D(!1),x(b)}})},style:j("input",s)}),(0,t.jsx)(eh,{onOk:()=>{O&&!v||(D(!1),o(v))},onCancel:()=>{D(!1)},nodeData:s,editConfirmRef:p,hideOk:O})]})]})},eh=({onOk:e,onCancel:r,nodeData:n,editConfirmRef:o,hideOk:l=!1})=>(0,t.jsxs)("div",{className:"jer-confirm-buttons",children:[!l&&(0,t.jsx)("div",{onClick:e,ref:o,children:(0,t.jsx)(ep,{name:"ok",nodeData:n})}),(0,t.jsx)("div",{onClick:r,children:(0,t.jsx)(ep,{name:"cancel",nodeData:n})})]}),ef=e=>e.reduce((e,t)=>"number"==typeof t?`${e}[${t}]`:""===e?t:`${e}.${t}`,""),eg=["string","number","boolean","null","object","array"],ey=({props:e,collapsed:t})=>{let{data:n,nodeData:o,parentData:l,onEdit:a,onError:i,showErrorMessages:s,restrictEditFilter:c,restrictDeleteFilter:d,restrictAddFilter:u,restrictDragFilter:p,translate:m,errorMessageTimeout:h}=e,{currentlyEditingElement:f,setCurrentlyEditingElement:g}=J(),[y,j]=(0,r.useState)(null),b=Object.assign(Object.assign({},o),{collapsed:t}),{path:v,key:x,size:E}=b,S=D(v),w=!c(b),C=!d(b),k=!u(b),O=!p(b)&&C&&null===f,N=e=>{s&&(j(e),setTimeout(()=>j(null),h)),console.warn("Error",e)},A=(0,r.useCallback)((e,t)=>{N(e.message),i&&i({currentData:b.fullData,errorValue:t,currentValue:n,name:x,path:v,error:e})},[i,s]),T=f===`key_${S}`,R="number"==typeof v.slice(-1)[0],M={isEditing:f===S,isEditingKey:T,isArray:R,canEditKey:null!==l&&w&&k&&C&&!R},I=""===x&&v.length>0?m("EMPTY_STRING",b):null;return{pathString:S,nodeData:b,path:v,name:x,size:E,canEdit:w,canDelete:C,canAdd:k,canDrag:O,error:y,showError:N,onError:A,setError:j,handleEditKey:e=>{if(g(null),x===e||!l)return;let t=v.slice(0,-1);Object.keys(l).includes(e)?A({code:"KEY_EXISTS",message:m("ERROR_KEY_EXISTS",b)},e):a(Object.fromEntries(Object.entries(l).map(([t,r])=>t===x?[e,r]:[t,r])),t).then(t=>{t&&A({code:"UPDATE_ERROR",message:t},e)})},derivedValues:M,emptyStringKey:I}},ej=({canDrag:e,canDragOnto:n,path:o,nodeData:l,onMove:a,onError:i,translate:s})=>{let{getStyles:c}=F(),{dragSource:d,setDragSource:u}=J(),[p,m]=(0,r.useState)(!1),h=D(o),f=(0,r.useMemo)(()=>e?{onDragStart:e=>{e.stopPropagation(),u({path:o,pathString:h})},onDragEnd:e=>{e.stopPropagation(),u({path:null,pathString:null})}}:{},[e,h]),g=(0,r.useMemo)(()=>e=>n?{onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDrop:t=>{t.stopPropagation(),j(e),u({path:null,pathString:null}),m(!1)},onDragEnter:t=>{var r;t.stopPropagation(),h.startsWith(null!=(r=d.pathString)?r:"")||m(e)},onDragExit:e=>{e.stopPropagation(),m(!1)}}:{},[d,n,h]),y=(0,r.useMemo)(()=>n&&null!==d.pathString?(0,t.jsx)("div",Object.assign({className:"jer-drop-target-bottom",style:{height:"50%",position:"absolute",width:"100%",top:"50%",zIndex:o.length}},g("below"))):null,[d,n,o.length]),j=e=>{var t,r;let n=null==(t=d.path)?void 0:t.slice(-1)[0],c=null==(r=d.path)?void 0:r.slice(0,-1).join("."),u=o.slice(0,-1).join(""),{parentData:p}=l;"string"==typeof n&&p&&!Array.isArray(p)&&Object.keys(p).includes(n)&&n in p&&c!==u?i({code:"KEY_EXISTS",message:s("ERROR_KEY_EXISTS",l)},n):a(d.path,o,e).then(e=>{e&&i({code:"UPDATE_ERROR",message:e},l.value)})};return{dragSourceProps:f,getDropTargetProps:g,BottomDropTarget:y,DropTargetPadding:({position:e,nodeData:r})=>p===e?(0,t.jsx)("div",{className:"jer-drag-n-drop-padding",style:c("dropZone",r)}):null,handleDrop:j}},eb=({isEditingKey:e,canEditKey:r,pathString:n,path:o,name:l,arrayIndexFromOne:a,handleKeyboard:i,handleEditKey:s,handleCancel:c,handleClick:d,keyValueArray:u,styles:p,getNextOrPrevious:m,emptyStringKey:h})=>{let{setCurrentlyEditingElement:f}=J(),g="number"==typeof l?String(l+ +!!a):l;return e?(0,t.jsx)("input",{className:"jer-input-text jer-key-edit",type:"text",name:n,defaultValue:g,autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>i(e,{stringConfirm:()=>s(e.target.value),cancel:c,tabForward:()=>{if(s(e.target.value),u){let e=null==u?void 0:u[0][0];f(e?[...o,e]:m("next"))}else f(o)},tabBack:()=>{s(e.target.value),f(m("prev"))}}),style:{width:g.length/1.5+.5+"em"}}):(0,t.jsxs)("span",{className:"jer-key-text",style:Object.assign(Object.assign({},p),{minWidth:`${Math.min(g.length+1,5)}ch`,flexShrink:+(g.length>10)}),onDoubleClick:()=>r&&f(o,"key"),onClick:d,children:[h?(0,t.jsx)("span",{className:"jer-empty-string",children:h}):g,""!==g||h?(0,t.jsx)("span",{className:"jer-key-colon",children:":"}):null]})},ev=e=>{let{data:n,parentData:o,onEdit:l,onDelete:a,onChange:i,onMove:s,enableClipboard:c,canDragOnto:d,restrictTypeSelection:u,searchFilter:p,searchText:m,showLabel:h,stringTruncate:f,showStringQuotes:g,arrayIndexFromOne:y,indent:j,translate:b,customNodeDefinitions:v,customNodeData:x,handleKeyboard:E,keyboardControls:S,sort:C,editConfirmRef:k,jsonStringify:O,showIconTooltips:D}=e,{getStyles:N}=F(),{setCurrentlyEditingElement:A,setCollapseState:T,previouslyEditedElement:R,setPreviouslyEditedElement:I,tabDirection:P,setTabDirection:K,previousValue:L,setPreviousValue:V}=J(),[_,z]=(0,r.useState)("function"==typeof n?Z:n),{pathString:$,nodeData:W,path:B,name:H,canEdit:U,canDelete:Y,canDrag:G,error:X,onError:q,handleEditKey:Q,emptyStringKey:ee,derivedValues:et}=ey({props:e}),{dragSourceProps:er,getDropTargetProps:en,BottomDropTarget:eo,DropTargetPadding:el}=ej({canDrag:G,canDragOnto:d,path:B,nodeData:W,onMove:s,onError:q,translate:b}),[ea,ei]=(0,r.useState)(ex(n,x)),es=(0,r.useCallback)(e=>{i?z(i({currentData:W.fullData,newValue:e,currentValue:_,name:H,path:B})):z(e)},[i]);(0,r.useEffect)(()=>{z("function"==typeof n?Z:n),ei(ex(n,x))},[n,X]);let{CustomNode:ec,customNodeProps:ed,hideKey:eu,showEditTools:ep=!0,showOnEdit:ef,showOnView:ev,passOriginalNode:ew}=x,eC=[...eg,...v.filter(({showInTypesSelector:e=!1,name:t})=>e&&!!t).map(({name:e})=>e)],ek=(0,r.useMemo)(()=>{if("boolean"==typeof u)return u?[]:eC;if(Array.isArray(u))return u;let e=u(W);return"boolean"==typeof e?e?[]:eC:e},[W,u]),[eO,eD]=(0,r.useState)(((e,t)=>{var r;if("string"!=typeof e)return null;let n=t.filter(t=>t instanceof Object&&t.enum&&t.values.includes(e)&&t.matchPriority);return n.sort((e,t)=>{var r,n;return(null!=(r=t.matchPriority)?r:0)-(null!=(n=e.matchPriority)?n:0)}),null!=(r=n[0])?r:null})(_,ek)),{isEditing:eN}=et,eA=w("value",W,p,m);if(!eN||eA&&U||A(M(W.fullData,B,P,C)||R),!eA)return null;let eT=e=>{let t;if(A(null),V(null),void 0===e||e&&"object"==typeof e&&"type"in e&&"target"in e&&"preventDefault"in e&&"function"==typeof e.preventDefault)switch(ea){case"object":t={[b("DEFAULT_NEW_KEY",W)]:_};break;case"array":t=null!=_?_:[];break;case"number":{let e=Number(_);t=isNaN(e)?0:e;break}default:t=_}else t=e;l(t,B).then(e=>{e&&q({code:"UPDATE_ERROR",message:e},t)})},eR=()=>{A(null),null===L?(z(n),V(null)):l(L,B)},{isEditingKey:eM,canEditKey:eI}=et,eP=!eN&&X,eK=eN&&ek.length>1,eL=("invalid"!==ea||ec)&&!X&&ep,eV=ec&&(eN&&ef||!eN&&ev),e_={value:_,parentData:o,setValue:es,isEditing:eN,canEdit:U,setIsEditing:U?()=>A(B):()=>{},handleEdit:eT,handleCancel:eR,path:B,stringTruncate:f,showStringQuotes:g,nodeData:W,enumType:eO,translate:b,handleKeyboard:E,keyboardCommon:{cancel:eR,tabForward:()=>{K("next"),I($);let e=M(W.fullData,B,"next",C);e&&(eT(),A(e))},tabBack:()=>{K("prev"),I($);let e=M(W.fullData,B,"prev",C);e&&(eT(),A(e))}}},ez={canEditKey:eI,isEditingKey:eM,pathString:$,path:B,name:H,arrayIndexFromOne:y,handleKeyboard:E,handleEditKey:Q,handleCancel:eR,styles:N("property",W),getNextOrPrevious:e=>M(W.fullData,B,e,C),emptyStringKey:ee},e$=eV?(0,t.jsx)(ec,Object.assign({},e,{value:_,customNodeProps:ed,setValue:es,handleEdit:eT,handleCancel:eR,handleKeyPress:e=>E(e,{stringConfirm:eT,cancel:eR}),isEditing:eN,setIsEditing:()=>A(B),getStyles:N,originalNode:ew?eE(n,e_):void 0,originalNodeKey:ew?(0,t.jsx)(eb,Object.assign({},ez)):void 0,canEdit:U,keyboardCommon:e_.keyboardCommon,onError:q})):eE(n,e_);return(0,t.jsxs)("div",Object.assign({className:"jer-component jer-value-component",style:{marginLeft:null!==o?j/2+"em":0,position:"relative"},draggable:G},er,en("above"),{children:[eo,(0,t.jsx)(el,{position:"above",nodeData:W}),(0,t.jsxs)("div",{className:"jer-value-main-row",style:{flexWrap:H.length>10?"wrap":"nowrap"},children:[h&&!eu&&(0,t.jsx)(eb,Object.assign({},ez)),(0,t.jsxs)("div",{className:"jer-value-and-buttons",children:[(0,t.jsx)("div",{className:"jer-input-component",children:e$}),eN?(0,t.jsx)(eh,{onOk:eT,onCancel:eR,nodeData:W,editConfirmRef:k}):eL&&(0,t.jsx)(em,{startEdit:U?()=>{V(L),A(B,eR)}:void 0,handleDelete:Y?()=>{a(_,B).then(e=>{e&&q({code:"DELETE_ERROR",message:e},_)})}:void 0,enableClipboard:c,translate:b,customButtons:e.customButtons,nodeData:W,handleKeyboard:E,keyboardControls:S,editConfirmRef:k,jsonStringify:O,showIconTooltips:D}),eK&&(0,t.jsxs)("div",{className:"jer-select jer-select-types",children:[(0,t.jsx)("select",{name:`${H}-type-select`,className:"jer-select-inner",onChange:e=>(e=>{let t=v.find(t=>t.name===e);if(t)return l(t.defaultValue,B),ei(e),eD(null),A(null),void T({path:B,collapsed:!1,includeChildren:!1});let r=ek.find(t=>t instanceof Object&&t.enum===e);if(r)return"string"==typeof _&&r.values.includes(_)||l(r.values[0],B).then(e=>{e&&(q({code:"UPDATE_ERROR",message:e},n),A(null))}),void eD(r);let n=eS(_,e,b("DEFAULT_NEW_KEY",W),(null==x?void 0:x.CustomNode)?b("DEFAULT_STRING",W):void 0);["string","number","boolean"].includes(e)||A(null),l(n,B).then(e=>{e?(q({code:"UPDATE_ERROR",message:e},n),A(null)):eD(null)})})(e.target.value),value:eO?eO.enum:ea,children:ek.map(e=>e instanceof Object&&"enum"in e?(0,t.jsx)("option",{value:e.enum,children:e.enum},e.enum):(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)("span",{className:"focus"})]}),eP&&(0,t.jsx)("span",{className:"jer-error-slug",style:N("error",W),children:X})]})]}),(0,t.jsx)(el,{position:"below",nodeData:W})]}))},ex=(e,t)=>(null==t?void 0:t.CustomNode)&&(null==t?void 0:t.name)&&t.showInTypesSelector?t.name:"string"==typeof e?"string":"number"==typeof e?"number":"boolean"==typeof e?"boolean":null===e?"null":"invalid",eE=(e,r)=>{let n=ex(e),{value:o}=r;switch(n){case"string":return(0,t.jsx)(ee,Object.assign({},r,{value:o}));case"number":return(0,t.jsx)(et,Object.assign({},r,{value:o}));case"boolean":return(0,t.jsx)(er,Object.assign({},r,{value:o}));case"null":return(0,t.jsx)(en,Object.assign({},r));default:return(0,t.jsx)(eo,Object.assign({},r))}},eS=(e,t,r,n)=>{switch(t){case"string":return null!=n?n:String(e);case"number":{let t=Number(e);return isNaN(t)?0:t}case"boolean":return!!e;case"null":return null;case"object":return{[r]:e};case"array":return[e];default:return String(e)}},ew=(e=[],t)=>{let r=e.filter(({condition:e})=>e(t));if(0===r.length)return{};let n=r[0],{element:o,wrapperElement:l,customNodeProps:a,wrapperProps:i,hideKey:s=!1,showEditTools:c=!0,showOnEdit:d=!1,showOnView:u=!0,showCollectionWrapper:p=!0}=n;return Object.assign({CustomNode:o,CustomWrapper:l,customNodeProps:a,wrapperProps:i,hideKey:s,showEditTools:c,showOnEdit:d,showOnView:u,showCollectionWrapper:p},v(n,["element","wrapperElement","customNodeProps","wrapperProps","hideKey","showEditTools","showOnEdit","showOnView","showCollectionWrapper"]))},eC=e=>{let{getStyles:n}=F(),{collapseState:o,setCollapseState:l,getMatchingCollapseState:a,currentlyEditingElement:i,setCurrentlyEditingElement:s,areChildrenBeingEdited:c,previousValue:d,setPreviousValue:u}=J(),{mainContainerRef:p,data:m,nodeData:h,parentData:f,showCollectionCount:g,onEdit:y,onAdd:j,onDelete:b,canDragOnto:v,collapseFilter:C,collapseAnimationTime:k,onMove:O,enableClipboard:D,onEditEvent:A,showIconTooltips:T,searchFilter:R,searchText:I,indent:P,sort:L,showArrayIndices:V,arrayIndexFromOne:_,defaultValue:z,newKeyOptions:$,translate:W,customNodeDefinitions:B,customNodeData:H,jsonParse:U,jsonStringify:Y,TextEditor:G,keyboardControls:X,handleKeyboard:Z,insertAtTop:q,onCollapse:Q,editConfirmRef:ee,collapseClickZones:et}=e,[er,en]=(0,r.useState)(Y(m)),eo=C(h),{contentRef:el,isAnimating:ea,maxHeight:ei,collapsed:es,animateCollapse:ec,cssTransitionValue:ed}=((e,t,n,o,l)=>{let[a,i]=(0,r.useState)(n?0:void 0),[s,c]=(0,r.useState)(n),d=(0,r.useRef)(!1),u=(0,r.useRef)(null),p=(0,r.useRef)(0),m=(0,r.useRef)(0),h=t/1e3+"s",f=(0,r.useCallback)(r=>{var n,a;if(s!==r){switch(window.clearTimeout(m.current),d.current=!0,r){case!0:{let e=null!=(a=null==(n=u.current)?void 0:n.offsetHeight)?a:0;p.current=e,i(e),setTimeout(()=>{i(0)},5);break}case!1:i(p.current||((e,t,r,n)=>{var o,l,a;if(!t.current)return 0;let i=parseInt(null!=(o=getComputedStyle(r.current).getPropertyValue("line-height"))?o:"16px"),s=(null!=(a=null==(l=t.current)?void 0:l.offsetWidth)?a:0)/(.5*i);return Math.min(n(e).replace(/\\n/g,"\n").split("\n").map(e=>Math.ceil(e.length/s)).reduce((e,t)=>e+t,0)*i+30,window.innerHeight-50)})(e,u,o,l))}c(!s),m.current=window.setTimeout(()=>{d.current=!1,r||i(void 0)},t)}},[t,s,e,o,l]);return{contentRef:u,isAnimating:d.current,animateCollapse:f,maxHeight:a,collapsed:s,cssTransitionValue:h}})(m,k,eo,p,Y),{pathString:eu,nodeData:ef,path:eg,name:ex,size:eE,canEdit:eS,canDelete:ek,canAdd:eO,canDrag:eD,error:eN,setError:eA,onError:eT,handleEditKey:eR,emptyStringKey:eM,derivedValues:eI}=ey({props:e,collapsed:es}),{dragSourceProps:eP,getDropTargetProps:eK,BottomDropTarget:eL,DropTargetPadding:eV}=ej({canDrag:eD,canDragOnto:v,path:eg,nodeData:ef,onMove:O,onError:eT,translate:W}),e_=(0,r.useRef)(!eo),{isEditing:ez,isEditingKey:e$,isArray:eF,canEditKey:eW}=eI;(0,r.useEffect)(()=>{en(Y(m))},[m,Y]),(0,r.useEffect)(()=>{let e=C(ef)&&!ez;e_.current=!e,ec(e)},[C]),(0,r.useEffect)(()=>{if(null!==o){let e=a(eg);e&&(e_.current=!0,ec(e.collapsed))}},[o]);let eB=(0,r.useRef)(null),eH=(0,r.useCallback)((e,t)=>{if("function"!=typeof z)return z;let r=z(e,t);return void 0!==r?r:null},[z]),eU=(0,r.useCallback)(e=>$?"function"!=typeof $?$:$(e):null,[$]),{CustomNode:eY,customNodeProps:eG,CustomWrapper:eJ,wrapperProps:eX={},hideKey:eZ,showEditTools:eq=!0,showOnEdit:eQ,showOnView:e0,showCollectionWrapper:e1=!0}=H,e2=c(eu);if(e2&&es&&ec(!1),!(w("collection",ef,R,I)||0===ef.level)&&!e2)return null;let e5=Array.isArray(m)?"array":"object",e4="array"===e5?{open:"[",close:"]"}:{open:"{",close:"}"},e3=e=>{"Tab"!==e.key||e.getModifierState("Shift")?Z(e,{objectConfirm:e8,cancel:e7}):(e.preventDefault(),en(K(eB,"	")))},e6=e=>{e.stopPropagation();let t=N(e);t&&X.collapseModifier.includes(t)?(e_.current=!0,l({collapsed:!es,path:eg,includeChildren:!0})):i&&i.includes(eu)||(e_.current=!0,l(null),Q&&Q({path:eg,collapsed:!es,includeChildren:!1}),ec(!es))},e8=()=>{try{let e=U(er);if(s(null),u(null),eA(null),Y(e)===Y(m))return;y(e,eg).then(t=>{t&&eT({code:"UPDATE_ERROR",message:t},e)})}catch(e){eT({code:"INVALID_JSON",message:W("ERROR_INVALID_JSON",ef)},er)}},e9=eg.length>0?()=>{b(m,eg).then(e=>{e&&eT({code:"DELETE_ERROR",message:e},m)})}:void 0,e7=()=>{s(null),null===d?(eA(null),en(Y(m)),u(null)):y(d,eg)},te="when-closed"===g?es:g,tt=!ez&&eq,tr=(V||!eF)&&!eZ&&void 0!==ex,tn=eY&&(ez&&eQ||!ez&&e0),to=Object.entries(m).map(([e,t])=>["array"===e5?Number(e):e,t]);"object"===e5&&L(to,e=>e);let tl=e_.current?ez?(0,t.jsxs)("div",{className:"jer-collection-text-edit",children:[G?(0,t.jsx)(G,{value:er,onChange:en,onKeyDown:e=>Z(e,{objectConfirm:e8,cancel:e7})}):(0,t.jsx)(E,{textAreaRef:eB,className:"jer-collection-text-area",name:eu,value:er,setValue:en,handleKeyPress:e3,styles:n("input",ef)}),(0,t.jsx)("div",{className:"jer-collection-input-button-row",children:(0,t.jsx)(eh,{onOk:e8,onCancel:e7,nodeData:ef,editConfirmRef:ee})})]}):to.map(([r,o],l)=>{let a={key:r,value:o,path:[...eg,r],level:eg.length+1,index:l,size:S(o)?Object.keys(o).length:null,parentData:m,fullData:ef.fullData},i=ew(B,a);return(0,t.jsx)("div",{className:"jer-collection-element",style:n("collectionElement",a),children:!S(o)||(null==i?void 0:i.renderCollectionAsValue)?(0,t.jsx)(ev,Object.assign({},e,{data:o,parentData:m,nodeData:a,canDragOnto:eS,showLabel:"object"===e5||V,customNodeData:i}),r):(0,t.jsx)(eC,Object.assign({},e,{data:o,parentData:m,nodeData:a,showCollectionCount:g,canDragOnto:eS,customNodeData:i}),r)},r)}):null,ta=!!e1&&es&&!e2;ta||(e_.current=!0);let ti=Object.assign(Object.assign({},e),{data:m,value:m,parentData:f,nodeData:ef,setValue:e=>x(void 0,void 0,void 0,function*(){return yield y(e,eg)}),handleEdit:e8,handleCancel:e7,handleKeyPress:e3,isEditing:ez,setIsEditing:()=>s(eg),getStyles:n,canDragOnto:eS,canEdit:eS,keyboardCommon:{},onError:eT}),ts=tn?(0,t.jsx)(eY,Object.assign({customNodeProps:eG},ti,{children:tl})):tl,tc=tt&&(0,t.jsx)(em,{startEdit:eS?()=>{e_.current=!0,u(null),s(eg)}:void 0,handleAdd:eO?e=>{ec(!1);let t=eH(ef,e);"array"===e5?j(t,[...eg,q.array?0:m.length],q.array?{insert:!0}:{}).then(e=>{e&&eT({code:"ADD_ERROR",message:e},t)}):e in m?eT({code:"KEY_EXISTS",message:W("ERROR_KEY_EXISTS",ef)},e):j(t,[...eg,e],q.object?{insertBefore:0}:{}).then(e=>{e&&eT({code:"ADD_ERROR",message:e},t)})}:void 0,handleDelete:ek?e9:void 0,enableClipboard:D,type:e5,nodeData:ef,translate:W,customButtons:e.customButtons,keyboardControls:X,handleKeyboard:Z,getNewKeyOptions:eU,editConfirmRef:ee,jsonStringify:Y,onEditEvent:A,showIconTooltips:T}),td={canEditKey:eW,isEditingKey:e$,pathString:eu,path:eg,name:ex,arrayIndexFromOne:_,handleKeyboard:Z,handleEditKey:eR,handleCancel:e7,keyValueArray:to,styles:n("property",ef),getNextOrPrevious:e=>M(ef.fullData,eg,e,L),handleClick:et.includes("property")?e6:e=>e.stopPropagation(),emptyStringKey:eM},tu=(0,t.jsxs)("div",Object.assign({className:"jer-component jer-collection-component",style:Object.assign(Object.assign({marginLeft:(0===eg.length?0:P/2)+"em"},n("collection",ef)),{position:"relative"}),draggable:eD},eP,eK("above"),{children:[(0,t.jsx)("div",{className:"jer-clickzone",style:{width:P/2+1+"em",zIndex:10+2*ef.level},onClick:et.includes("left")?e6:void 0}),!ez&&eL,(0,t.jsx)(eV,{position:"above",nodeData:ef}),e1?(0,t.jsxs)("div",{className:"jer-collection-header-row",style:{position:"relative"},onClick:et.includes("header")?e6:void 0,children:[(0,t.jsxs)("div",{className:"jer-collection-name",children:[(0,t.jsx)("div",{className:"jer-collapse-icon jer-accordion-icon"+(es?" jer-rotate-90":""),style:{zIndex:11+2*ef.level,transition:ed},onClick:e6,children:(0,t.jsx)(ep,{name:"chevron",rotate:es,nodeData:ef})}),tr&&(0,t.jsx)(eb,Object.assign({},td)),!ez&&(0,t.jsx)("span",{className:"jer-brackets jer-bracket-open",style:n("bracket",ef),children:e4.open})]}),!ez&&te&&(0,t.jsx)("div",{className:"jer-collection-item-count"+(te?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},n("itemCount",ef)),{transition:ed}),children:1===eE?W("ITEM_SINGLE",Object.assign(Object.assign({},ef),{size:1}),1):W("ITEMS_MULTIPLE",ef,eE)}),(0,t.jsx)("div",{className:"jer-brackets"+(ta?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},n("bracket",ef)),{transition:ed}),children:e4.close}),tc]}):eZ?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{className:"jer-collection-header-row",style:{position:"relative"},children:[(0,t.jsx)(eb,Object.assign({},td)),tc]}),(0,t.jsxs)("div",{className:"jer-collection-inner",style:Object.assign(Object.assign({overflowY:ta||ea?"clip":"visible",maxHeight:e2?void 0:ei},n("collectionInner",ef)),{transition:ed}),ref:el,children:[ts,(0,t.jsx)("div",{className:ez?"jer-collection-error-row":"jer-collection-error-row-edit",children:eN&&(0,t.jsx)("span",{className:"jer-error-slug",style:n("error",ef),children:eN})}),!ez&&e1&&(0,t.jsx)("div",{className:"jer-brackets jer-bracket-outside",style:Object.assign(Object.assign({},n("bracket",ef)),{marginLeft:(P<3?-1:P<6?-.5:0)+"em"}),children:e4.close})]}),(0,t.jsx)(eV,{position:"below",nodeData:ef})]}));return eJ?(0,t.jsx)(eJ,Object.assign({customNodeProps:eX},ti,{children:tu})):tu},ek={ITEM_SINGLE:"{{count}} item",ITEMS_MULTIPLE:"{{count}} items",KEY_NEW:"Enter new key",KEY_SELECT:"Select key",NO_KEY_OPTIONS:"No key options",ERROR_KEY_EXISTS:"Key already exists",ERROR_INVALID_JSON:"Invalid JSON",ERROR_UPDATE:"Update unsuccessful",ERROR_DELETE:"Delete unsuccessful",ERROR_ADD:"Adding node unsuccessful",DEFAULT_STRING:"New data!",DEFAULT_NEW_KEY:"key",SHOW_LESS:"(Show less)",EMPTY_STRING:"<empty string>",TOOLTIP_COPY:"Copy to clipboard",TOOLTIP_EDIT:"Edit",TOOLTIP_DELETE:"Delete",TOOLTIP_ADD:"Add"};var eO=[],eD=[];!function(e,t){if(e&&"undefined"!=typeof document){var r,n=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,l="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var a=eO.indexOf(l);-1===a&&(eD[a=eO.push(l)-1]={}),r=eD[a]&&eD[a][n]?eD[a][n]:eD[a][n]=i()}else r=i();65279===e.charCodeAt(0)&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function i(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var r=Object.keys(t.attributes),o=0;o<r.length;o++)e.setAttribute(r[o],t.attributes[r[o]]);var a="prepend"===n?"afterbegin":"beforeend";return l.insertAdjacentElement(a,e),e}}(':root{--jer-select-border:#b6b6b6;--jer-select-focus:#777;--jer-select-arrow:#777;--jer-form-border:1px solid #ededf0;--jer-form-border-focus:1px solid #e2e2e2;--jer-highlight-color:#b3d8ff}.jer-visible{opacity:1}.jer-hidden{opacity:0}.jer-select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#000;cursor:inherit;font-family:inherit;font-size:.8em;line-height:inherit;margin:0;outline:none;padding:0 1em 0 0;z-index:1}select::-ms-expand{display:none}.jer-select{align-items:center;background-color:#fff;background-image:linear-gradient(0deg,#f9f9f9,#fff 33%);border:1px solid var(--jer-select-border);border-radius:.25em;cursor:pointer;display:grid;grid-template-areas:"select";line-height:1.1;max-width:15ch;min-width:12ch;padding:.25em .5em;position:relative}.jer-select select,.jer-select:after{grid-area:select}.jer-select:not(.jer-select--multiple):after{background-color:var(--jer-select-arrow);clip-path:polygon(100% 0,0 0,50% 100%);content:"";height:.5em;justify-self:end;width:.8em}select:focus+.focus{border:1px solid var(--jer-select-focus);border-radius:inherit;bottom:-1px;left:-1px;position:absolute;right:-1px;top:-1px}.jer-select-inner{text-overflow:ellipsis;width:100%}.jer-editor-container{border-radius:.5em;font-size:16px;line-height:1;padding:1em 1em 1em 2em;position:relative;text-align:left}.jer-editor-container textarea{border:var(--jer-form-border);border-radius:.3em;color:var(--jer-input-color);outline:none}.jer-editor-container textarea:focus{border:var(--jer-form-border-focus)}.jer-editor-container input{border:var(--jer-form-border);border-radius:.3em;font-family:inherit;outline:none}.jer-editor-container input:focus{border:var(--jer-form-border-focus)}.jer-editor-container ::selection{background-color:var(--jer-highlight-color)}.jer-collection-header-row,.jer-value-main-row{align-items:center;display:flex;gap:.3em;min-height:1.7em}.jer-collection-header-row{display:flex;flex-wrap:wrap}.jer-collapse-icon{left:-1.2em;position:absolute;top:.35em}.jer-collection-inner{position:relative}.jer-collection-text-edit{align-items:flex-start;display:flex;flex-direction:column;gap:.3em;line-height:1.1em}.jer-collection-text-area{font-family:inherit;font-size:.85em;max-height:40em;overflow:hidden;padding:.2em .5em 0;resize:both}.jer-collection-input-button-row{display:flex;font-size:150%;justify-content:flex-end;margin-top:.4em;width:100%}.jer-collection-error-row{bottom:.5em;position:absolute}.jer-error-slug{margin-left:1em}.jer-value-component{position:relative}.jer-value-main-row{display:flex;gap:0}.jer-value-and-buttons{align-items:center;display:flex;justify-content:flex-start;padding-left:.5em}.jer-value-error-row{position:absolute}.jer-value-string{line-height:1.3em;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word}.jer-string-expansion{cursor:pointer;filter:saturate(50%);opacity:.6}.jer-show-less{font-size:80%}.jer-hyperlink{text-decoration:underline}.jer-input-text{font-family:inherit;font-size:.9em;height:1.4em;line-height:1.2em;margin:0;min-width:6em;overflow:hidden;padding:.25em .5em .2em;resize:none}.jer-input-boolean{margin-left:.3em;margin-right:.3em;transform:scale(1.5)}.jer-key-text{line-height:1.1em;white-space:pre-wrap;word-break:break-word}.jer-key-edit{font-size:inherit;font-size:.9em;padding:0 .3em}.jer-value-invalid{font-style:italic;opacity:.5}.jer-input-number{font-size:90%;min-width:3em}.jer-confirm-buttons,.jer-edit-buttons{align-items:center;cursor:pointer;display:flex;height:1em}.jer-input-buttons{gap:.4em}.jer-edit-buttons{gap:.4em;margin-left:.5em;opacity:0}.jer-confirm-buttons{gap:.2em;margin-left:.4em}.jer-edit-buttons:hover{opacity:1;position:relative}.jer-collection-header-row:hover>.jer-edit-buttons,.jer-value-and-buttons:hover>.jer-edit-buttons,.jer-value-main-row:hover>.jer-edit-buttons{opacity:1}.jer-copy-pulse{position:relative;transition:.3s}.jer-copy-pulse:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-copy-pulse:after{border-radius:50%;box-shadow:0 0 15px 5px var(--jer-icon-copy-color);content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all .5s;width:100%}.jer-copy-pulse:active:after{border-radius:4em;box-shadow:0 0 0 0 var(--jer-icon-copy-color);left:0;opacity:1;position:absolute;top:0;transition:0s}.jer-copy-pulse:active{top:.07em}.jer-rotate-90{transform:rotate(-90deg)}.jer-icon:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-empty-string{font-size:90%;font-style:italic}.jer-drag-n-drop-padding{border:1px dashed #e0e0e0;border-radius:.3em;height:.5em}.jer-clickzone{height:calc(100% - .8em);left:-1em;position:absolute;top:1.2em}',{});let eN=({data:e,setData:n,rootName:o="root",onUpdate:l=()=>{},onEdit:a=l,onDelete:i=l,onAdd:s=l,onChange:c,onError:d,onEditEvent:u,showErrorMessages:p=!0,enableClipboard:m=!0,indent:h=2,collapse:f=!1,collapseAnimationTime:g=300,showCollectionCount:y=!0,restrictEdit:j=!1,restrictDelete:b=!1,restrictAdd:v=!1,restrictTypeSelection:E=!1,restrictDrag:w=!0,viewOnly:C,searchFilter:k,searchText:O,searchDebounceTime:N=350,keySort:T=!1,showArrayIndices:M=!0,arrayIndexFromOne:I=!1,showStringQuotes:P=!0,showIconTooltips:K=!1,defaultValue:V=null,newKeyOptions:_,minWidth:z=250,maxWidth:$="min(600px, 90vw)",rootFontSize:W,stringTruncate:B=250,translations:H={},className:U,id:Y,customText:G={},customNodeDefinitions:X=[],customButtons:Z=[],jsonParse:q=JSON.parse,jsonStringify:Q=(e,t)=>JSON.stringify(e,t,2),TextEditor:ee,errorMessageTimeout:et=2500,keyboardControls:er={},externalTriggers:en,insertAtTop:eo=!1,onCollapse:el,collapseClickZones:ea=["header","left"]})=>{let{getStyles:ei}=F(),{setCurrentlyEditingElement:es}=J(),ec=(0,r.useMemo)(()=>eR(f),[f]),ed=(0,r.useMemo)(()=>(e,t,r)=>((e,t,r,n,o)=>{if(t[n]){let e=t[n](r);if(null!==e)return e}let l=n in e?e[n]:ek[n];return void 0===o?l:null==l?void 0:l.replace("{{count}}",String(o))})(H,G,t,e,r),[H,G]),[eu,ep]=(0,r.useState)(O),[em,eh]=(({setData:e,data:t})=>{let[n,o]=(0,r.useState)(e?void 0:t),l=(0,r.useCallback)(t=>{e?e(t):o(t)},[e]);return(0,r.useEffect)(()=>{e||o(t)},[t]),[e?t:n,l]})({setData:n,data:e}),ef=(0,r.useRef)(null);(0,r.useEffect)(()=>{es(null);let e=setTimeout(()=>ep(O),N);return()=>clearTimeout(e)},[O,N]);let eg={key:o,path:[],level:0,index:0,value:em,size:"object"==typeof em&&null!==em?Object.keys(em).length:1,parentData:null,fullData:em},ey=(e,t)=>x(void 0,void 0,void 0,function*(){let r=yield e(t);if(!0===r||void 0===r)return void eh(t.newData);let[n,o]=eI(r)?r:["error",r];if("error"===n)return eh(t.currentData),!1===o?ed("ERROR_UPDATE",eg):String(o);eh(o)}),ej=(0,r.useMemo)(()=>eR(j,C),[j,C]),eb=(0,r.useMemo)(()=>eR(b,C),[b,C]),ex=(0,r.useMemo)(()=>eR(v,C),[v,C]),eE=(0,r.useMemo)(()=>eR(w,C),[w,C]),eS=(0,r.useMemo)(()=>eM(k),[k]),eO=(0,r.useMemo)(()=>(e=>{let t=Object.assign({},R);for(let r of Object.keys(R))if(e[r]){let n=e[r],o=["clipboardModifier","collapseModifier"].includes(r)?Array.isArray(n)?n:[n]:"string"==typeof n?{key:n}:n;t[r]=o,["stringConfirm","numberConfirm","booleanConfirm"].forEach(r=>{!e[r]&&e.confirm&&(t[r]=t.confirm)})}return t})(er),[er]),eD=(0,r.useCallback)((e,t)=>((e,t,r)=>{for(let[n,o]of Object.entries(t))if(A(r,e[n],n)){r.preventDefault(),o();break}})(eO,t,e),[eO]),eN=(0,r.useMemo)(()=>{let e=eP(X,"stringifyReplacer");return t=>Q(t,e)},[X,Q]),eA=(0,r.useMemo)(()=>{let e=eP(X,"parseReviver");return t=>L(q(t,e))},[X,q]),eK=(0,r.useRef)(null);((e,t)=>{let{setCurrentlyEditingElement:n,currentlyEditingElement:o,setCollapseState:l}=J();(0,r.useEffect)(()=>{if(!e)return;let{collapse:r,edit:a}=e;r&&l(r);let i=!(null==a?void 0:a.path)||D(a.path)===o;switch(null==a?void 0:a.action){case"accept":i&&(t.current&&t.current.click(),n(null));break;case"cancel":i&&n(null);break;default:(null==a?void 0:a.path)&&n(a.path)}},[e])})(en,eK);let eL=(0,r.useCallback)((e,t)=>{!1!==T&&("function"!=typeof T?e.sort((e,r)=>{let n=t(e)[0],o=t(r)[0];return n<o?-1:+(n>o)}):e.sort((e,r)=>T(t(e),t(r))))},[T]),eV=ew(X,eg),e_={mainContainerRef:ef,name:o,nodeData:eg,onEdit:(e,t)=>x(void 0,void 0,void 0,function*(){let{currentData:r,newData:n,currentValue:o,newValue:l}=eT(em,t,e,"update");if(o!==l)return yield ey(a,{currentData:r,newData:n,currentValue:o,newValue:l,name:t.slice(-1)[0],path:t})}),onDelete:(e,t)=>x(void 0,void 0,void 0,function*(){let{currentData:r,newData:n,currentValue:o,newValue:l}=eT(em,t,e,"delete");return yield ey(i,{currentData:r,newData:n,currentValue:o,newValue:l,name:t.slice(-1)[0],path:t})}),onAdd:(e,t,r)=>x(void 0,void 0,void 0,function*(){let{currentData:n,newData:o,currentValue:l,newValue:a}=eT(em,t,e,"add",r);return yield ey(s,{currentData:n,newData:o,currentValue:l,newValue:a,name:t.slice(-1)[0],path:t})}),onChange:c,onError:d,onEditEvent:u,showErrorMessages:p,onMove:(e,t,r)=>x(void 0,void 0,void 0,function*(){if(null===e)return;let{currentData:n,newData:o,currentValue:l}=eT(em,e,"","delete"),i=e.slice(-1)[0],s=t.slice(0,-1),c=t.slice(-1)[0],d="number"==typeof c?"above"===r?c:c+1:"number"==typeof i?`arr_${i}`:i;e.slice(0,-1).join(".")===t.slice(0,-1).join(".")&&"number"==typeof i&&"number"==typeof d&&i<d&&(d-=1);let u="number"==typeof d?{insert:!0}:"above"===r?{insertBefore:c}:{insertAfter:c},{newData:p,newValue:m}=eT(o,[...s,d],l,"add",u);return yield ey(a,{currentData:n,newData:p,currentValue:l,newValue:m,name:t.slice(-1)[0],path:t})}),showCollectionCount:y,collapseFilter:ec,collapseAnimationTime:g,restrictEditFilter:ej,restrictDeleteFilter:eb,restrictAddFilter:ex,restrictTypeSelection:E,restrictDragFilter:eE,canDragOnto:!1,searchFilter:eS,searchText:eu,enableClipboard:m,keySort:T,sort:eL,showArrayIndices:M,arrayIndexFromOne:I,showStringQuotes:P,showIconTooltips:K,indent:h,defaultValue:V,newKeyOptions:_,stringTruncate:B,translate:ed,customNodeDefinitions:X,customNodeData:eV,customButtons:Z,parentData:null,jsonParse:eA,jsonStringify:eN,TextEditor:ee,errorMessageTimeout:et,handleKeyboard:eD,keyboardControls:eO,insertAtTop:{object:!0===eo||"object"===eo,array:!0===eo||"array"===eo},onCollapse:el,editConfirmRef:eK,collapseClickZones:ea},ez=Object.assign(Object.assign({},ei("container",eg)),{minWidth:z,maxWidth:$});return ez.fontSize=null!=W?W:ez.fontSize,(0,t.jsx)("div",{id:Y,ref:ef,className:`jer-editor-container ${null!=U?U:""}`,style:ez,children:S(em)&&!eV.renderCollectionAsValue?(0,t.jsx)(eC,Object.assign({data:em},e_)):(0,t.jsx)(ev,Object.assign({data:em,showLabel:!0},e_))})},eA=e=>{var n;let[o,l]=(0,r.useState)();return(0,r.useEffect)(()=>{l(document.documentElement)},[]),o?(0,t.jsx)($,{theme:null!=(n=e.theme)?n:_,icons:e.icons,docRoot:o,children:(0,t.jsx)(G,{onEditEvent:e.onEditEvent,onCollapse:e.onCollapse,children:(0,t.jsx)(eN,Object.assign({},e))})}):null},eT=(e,t,r,n,o={})=>{if(0===t.length)return{currentData:e,newData:r,currentValue:e,newValue:r};let l=Object.assign({remove:"delete"===n},o),a="add"!==n?y(e,t):void 0;return{currentData:e,newData:((e,t,r,n={})=>{let{remove:o=!1,createNew:l=!0,noError:a=!1}=n,i="string"==typeof t?t:"number"==typeof t?String(t):t.reduce((e,t)=>"number"==typeof t?`${e}[${t}]`:""===e?t:`${e}.${t}`,""),s=Object.assign(Object.assign({},n),{remove:o,createNew:l,noError:a,fullData:e,fullPath:i}),c=Array.isArray(t)?t:(Array.isArray(t)?t:t.split(/(\.|\[\d+\])/).filter(e=>"."!==e&&""!==e).map(e=>{let t=/\[(\d+)\]/.exec(e);return t?Number(t[1]):e}).flat()).filter(e=>""!==e);return Array.isArray(e)&&o&&1===c.length?m(e,c[0]):h(e,c,r,s)})(e,t,r,l),currentValue:a,newValue:"delete"!==n?r:void 0}},eR=(e,t)=>t?()=>!0:"boolean"==typeof e?()=>e:"number"==typeof e?({level:t})=>t>=e:e,eM=e=>{if(void 0!==e)return"value"===e?k:"key"===e?O:"all"===e?(e,t)=>k(e,t)||O(e,t):e},eI=e=>Array.isArray(e)&&2===e.length&&["error","value"].includes(e[0]),eP=(e,t)=>{let r="stringifyReplacer"===t?[e=>void 0===e?V:e]:[];if(r.push(...e.map(e=>e[t]).filter(e=>!!e)),0!==r.length)return(e,t)=>{let n=t;for(let e of r)n=e(n);return n}};var eK=e.i(19646),eL=e.i(26863);let eV=(0,o.default)((0,t.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var e_=e.i(63362);function ez(){let e=(0,e_.default)(e=>e.nodes),o=(0,e_.default)(e=>e.edges),[u,p]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),[f,g]=(0,r.useState)(void 0),[y,j]=(0,r.useState)([]),b=()=>p(!1),v=()=>{let t=function(e,t){let r=new Map;for(let t of e)r.set(t.id,t);let n=new Map;for(let e of t)n.has(e.source)||n.set(e.source,[]),n.get(e.source).push(e.target);let o=e.filter(e=>e.data.type===e_.NodeTypes.ROOT),l=[];0===o.length&&l.push("No root node found; export will include no top-level root.");let a=new Set,i=new Set;function s(e){let t=r.get(e);if(!t)return l.push(`Edge references missing node id "${e}".`),null;if(i.has(e))return l.push(`Cycle detected at node "${e}" - stopping recursion there.`),{type:t.data.type,name:t.data.label,children:[]};i.add(e),a.add(e);let o=t.data,c={type:o.type,name:o.label??o.type};o.operator&&(c.operator=o.operator),void 0!==o.value&&(c.value=o.value);let d=n.get(e)??[];if(d.length>0)for(let e of(c.children=[],d)){let t=s(e);t&&c.children.push(t)}return i.delete(e),c}let c={};if(1===o.length){let e=o[0],t=[];for(let r of n.get(e.id)??[]){let e=s(r);e&&t.push(e)}c[e.id]={children:t},a.add(e.id)}else if(o.length>1)c.roots=o.map(e=>{let t=(n.get(e.id)??[]).map(e=>s(e)).filter(Boolean);return a.add(e.id),{id:e.id,children:t}});else{l.push("No root nodes found; building forest of nodes with no incoming edges as top-level entries.");let r=new Map;for(let t of e)r.set(t.id,0);for(let e of t)r.set(e.target,(r.get(e.target)??0)+1);c.roots=e.filter(e=>(r.get(e.id)??0)===0).map(e=>{let t=(n.get(e.id)??[]).map(e=>s(e)).filter(Boolean);return a.add(e.id),{id:e.id,children:t}})}return{tree:c,orphanNodes:e.filter(e=>!a.has(e.id)),warnings:l.length?l:void 0}}(e,o),r={...t.tree};t.orphanNodes.length>0&&(r.orphans=t.orphanNodes.map(e=>({id:e.id,label:e.data.label,type:e.data.type}))),h(r),g(t.warnings),j(t.orphanNodes.map(e=>({id:e.id,label:e.data.label})))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{variant:"contained",color:"primary",startIcon:(0,t.jsx)(l,{}),sx:{background:"#1976d2",color:"#fff",fontWeight:"bold"},onClick:()=>{p(!0),v()},children:"Export"}),(0,t.jsxs)(a.default,{open:u,onClose:b,fullWidth:!0,maxWidth:"lg",children:[(0,t.jsx)(i.default,{children:"Export Behavior Tree"}),(0,t.jsx)(s.default,{children:(0,t.jsxs)(eK.default,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[(0,t.jsx)(eK.default,{sx:{border:"1px solid #e0e0e0",borderRadius:1,overflow:"hidden"},children:m?(0,t.jsx)(eA,{data:m}):(0,t.jsx)(d.default,{label:"Exported JSON",value:"",multiline:!0,minRows:6,fullWidth:!0,disabled:!0})}),(0,t.jsxs)(eK.default,{children:[(0,t.jsx)(eL.default,{variant:"subtitle1",children:"Logs"}),f&&f.length>0?(0,t.jsx)(eK.default,{sx:{mt:1},children:f.map((e,r)=>(0,t.jsx)(eL.default,{variant:"body2",color:"warning.main",children:e},r))}):(0,t.jsx)(eL.default,{variant:"body2",color:"text.secondary",children:"No warnings"}),(0,t.jsxs)(eK.default,{sx:{mt:2},children:[(0,t.jsx)(eL.default,{variant:"subtitle2",children:"Orphan nodes"}),y.length>0?(0,t.jsx)(eK.default,{component:"ul",sx:{pl:2},children:y.map(e=>(0,t.jsx)("li",{children:(0,t.jsxs)(eL.default,{variant:"body2",children:[e.id,": ",e.label]})},e.id))}):(0,t.jsx)(eL.default,{variant:"body2",color:"text.secondary",children:"No orphan nodes"})]})]})]})}),(0,t.jsxs)(c.default,{children:[(0,t.jsx)(n.default,{onClick:v,children:"Refresh"}),(0,t.jsx)(n.default,{onClick:b,children:"Close"}),(0,t.jsx)(eK.default,{sx:{flex:1}}),(0,t.jsx)(n.default,{onClick:()=>{let e=new Blob([m?JSON.stringify(m,null,2):"{}"],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="behavior-tree-export.json",r.click(),URL.revokeObjectURL(t)},variant:"contained",color:"primary",startIcon:(0,t.jsx)(eV,{}),children:"Save JSON"})]})]})]})}e.s(["default",()=>ez],89032)}]);